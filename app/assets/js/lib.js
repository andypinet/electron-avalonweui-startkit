!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.avalon=t():e.avalon=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var r=n(84);n(8),n(15),n(86),n(95),n(72),n(104),n(105),e.exports=r},,,function(e,t){(function(t){function n(e){return new n.init(e)}t.avalon=n,"undefined"!=typeof window&&(window.avalon=n),n.init=function(e){this[0]=this.element=e},n.fn=n.prototype=n.init.prototype,n.shadowCopy=function(e,t){for(var n in t)e[n]=t[n];return e};var r=/[^, ]+/g,o=t.console;n.shadowCopy(n,{noop:function(){},rword:r,inspect:{}.toString,ohasOwn:{}.hasOwnProperty,log:function(){o&&n.config.debug&&Function.apply.call(console.log,console,arguments)},warn:function(){if(o&&n.config.debug){var e=console.warn||console.log;Function.apply.call(e,console,arguments)}},error:function(e,t){throw(t||Error)(e)},oneObject:function(e,t){"string"==typeof e&&(e=e.match(r)||[]);for(var n={},o=void 0!==t?t:1,a=0,i=e.length;i>a;a++)n[e[a]]=o;return n}}),e.exports=n}).call(t,function(){return this}())},function(e,t){(function(t){var n=t,r={window:n,document:{createElement:function(){return{}},createElementNS:function(){return{}},contains:Boolean},root:{outerHTML:"x"},msie:NaN,modern:!0,avalonDiv:{},avalonFragment:null};if(n.location&&n.navigator&&n.window){var o=n.document;r.document=o,r.modern=n.dispatchEvent,r.root=o.documentElement,r.avalonDiv=o.createElement("div"),r.avalonFragment=o.createDocumentFragment(),n.VBArray&&(r.msie=o.documentMode||(n.XMLHttpRequest?7:6))}e.exports=r}).call(t,function(){return this}())},,function(e,t){function n(e,t,n){e.props[n.name]=avalon.parseExpr(n)}var r={},o=/([a-z\d])([A-Z]+)/g,a=/[-_][^-_]/g,i=/\d\.\d{4}/,s=/[-.*+?^${}()|[\]\/\\]/g,l=[].slice;avalon.shadowCopy(avalon,{caches:{},vmodels:{},filters:{},components:{},resolvedComponents:{},directives:{},eventHooks:{},eventListeners:{},validators:{},cssHooks:r,parsers:{number:function(e){return""===e?"":parseFloat(e)||0},string:function(e){return null===e||void 0===e?"":e+""},"boolean":function(e){return"true"===e}},version:"2.06",slice:function(e,t,n){return l.call(e,t,n)},css:function(e,t,n,o){e instanceof avalon&&(e=e[0]);var a=avalon.camelize(t);if(t=avalon.cssName(a)||a,void 0===n||"boolean"==typeof n){o=r[a+":get"]||r["@:get"],"background"===t&&(t="backgroundColor");var i=o(e,t);return n===!0?parseFloat(i)||0:i}if(""===n)e.style[t]="";else{if(null==n||n!==n)return;isFinite(n)&&!avalon.cssNumber[a]&&(n+="px"),o=r[a+":set"]||r["@:set"],o(e,t,n)}},directive:function(e,t){return t.parse=t.parse||n,this.directives[e]=t},isObject:function(e){return null!==e&&"object"==typeof e},range:function(e,t,n){n||(n=1),null==t&&(t=e||0,e=0);for(var r=-1,o=Math.max(0,Math.ceil((t-e)/n)),a=new Array(o);++r<o;)a[r]=e,e+=n;return a},hyphen:function(e){return e.replace(o,"$1-$2").toLowerCase()},camelize:function(e){return!e||e.indexOf("-")<0&&e.indexOf("_")<0?e:e.replace(a,function(e){return e.charAt(1).toUpperCase()})},makeHashCode:function(e){return e=e||"avalon",String(Math.random()+Math.random()).replace(i,e)},escapeRegExp:function(e){return(e+"").replace(s,"\\$&")},Array:{merge:function(e,t){e.push.apply(e,t)},ensure:function(e,t){return-1===e.indexOf(t)?e.push(t):void 0},removeAt:function(e,t){return!!e.splice(t,1).length},remove:function(e,t){var n=e.indexOf(t);return~n?avalon.Array.removeAt(e,n):!1}}}),"undefined"!=typeof performance&&performance.now&&(avalon.makeHashCode=function(e){return e=e||"avalon",(e+performance.now()).replace(".","")});var c=1;e.exports={avalon:avalon,getLongID:function(e){return e.uuid||(e.uuid=avalon.makeHashCode("e"))},getShortID:function(e){return e.uuid||(e.uuid="_"+ ++c)}}},function(e,t){function n(e){for(var t in e)if(avalon.ohasOwn.call(e,t)){var r=e[t];"function"==typeof n.plugins[t]?n.plugins[t](r):"object"==typeof n[t]?avalon.shadowCopy(n[t],r):n[t]=r}return this}avalon.config=n;var r={interpolate:function(e){var t=e[0],r=e[1];if(t===r)throw new SyntaxError("openTag!==closeTag");var o=t+"test"+r,a=avalon.avalonDiv;if(a.innerHTML=o,a.innerHTML!==o&&a.innerHTML.indexOf("&lt;")>-1)throw new SyntaxError("此定界符不合法");a.innerHTML="",n.openTag=t,n.closeTag=r;var i=avalon.escapeRegExp(t),s=avalon.escapeRegExp(r);n.rexpr=new RegExp(i+"([\\ss\\S]*)"+s),n.rexprg=new RegExp(i+"([\\ss\\S]*)"+s,"g"),n.rbind=new RegExp(i+"[\\ss\\S]*"+s+"|\\bms-|\\bslot\\b")}};n.plugins=r,avalon.config({interpolate:["{{","}}"],debug:!0})},function(e,t,n){function r(e){return e}var o=n(9),a=n(10),i=n(11),s=n(12),l=n(13),c=n(14),u=avalon.filters;avalon.__format__=function(e){var t=u[e];return t?t.get?t.get:t:r},avalon.mix(u,{uppercase:function(e){return e.toUpperCase()},lowercase:function(e){return e.toLowerCase()},truncate:function(e,t,n){return t=t||30,n="string"==typeof n?n:"...",e.length>t?e.slice(0,t-n.length)+n:String(e)},camelize:avalon.camelize,date:s,escape:a,sanitize:i,number:o,currency:function(e,t,n){return(t||"￥")+o(e,isFinite(n)?n:2)}},l,c),e.exports=avalon},function(e,t){function n(e,t,n,r){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var o=isFinite(+e)?+e:0,a=isFinite(+t)?Math.abs(t):3,i=r||",",s=n||".",l="",c=function(e,t){var n=Math.pow(10,t);return""+(Math.round(e*n)/n).toFixed(t)};return l=(a?c(o,a):""+Math.round(o)).split("."),l[0].length>3&&(l[0]=l[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,i)),(l[1]||"").length<a&&(l[1]=l[1]||"",l[1]+=new Array(a-l[1].length+1).join("0")),l.join(s)}e.exports=n},function(e,t){function n(e){return String(e).replace(/&/g,"&amp;").replace(r,function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return"&#"+(1024*(t-55296)+(n-56320)+65536)+";"}).replace(o,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var r=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,o=/([^\#-~| |!])/g;e.exports=n},function(e,t){var n=/<script[^>]*>([\S\s]*?)<\/script\s*>/gim,r=/\s+(on[^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g,o=/<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/gi,a={a:/\b(href)\=("javascript[^"]*"|'javascript[^']*')/gi,img:/\b(src)\=("javascript[^"]*"|'javascript[^']*')/gi,form:/\b(action)\=("javascript[^"]*"|'javascript[^']*')/gi};e.exports=function(e){return e.replace(n,"").replace(o,function(e,t){var n=e.toLowerCase().match(/<(\w+)\s/);if(n){var o=a[n[1]];o&&(e=e.replace(o,function(e,t,n){var r=n.charAt(0);return t+"="+r+"javascript:void(0)"+r}))}return e.replace(r," ").replace(/\s+/g," ")})}},function(e,t){function n(e){return parseInt(e,10)||0}function r(e,t,n){var r="";for(0>e&&(r="-",e=-e),e=""+e;e.length<t;)e="0"+e;return n&&(e=e.substr(e.length-t)),r+e}function o(e,t,n,o){return function(a){var i=a["get"+e]();return(n>0||i>-n)&&(i+=n),0===i&&-12===n&&(i=12),r(i,t,o)}}function a(e,t){return function(n,r){var o=n["get"+e](),a=(t?"SHORT"+e:e).toUpperCase();return r[a][o]}}function i(e){var t=-1*e.getTimezoneOffset(),n=t>=0?"+":"";return n+=r(Math[t>0?"floor":"ceil"](t/60),2)+r(Math.abs(t%60),2)}function s(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}function l(e,t){var r,o,a=l.locate,i="",s=[];if(t=t||"mediumDate",t=a[t]||t,"string"==typeof e)if(/^\d+$/.test(e))e=n(e);else if(p.test(e))e=+RegExp.$1;else{var f=e.trim(),d=[0,0,0,0,0,0,0],v=new Date(0);f=f.replace(/^(\d+)\D(\d+)\D(\d+)/,function(e,t,r,o){var a=4===o.length?[o,t,r]:[t,r,o];return d[0]=n(a[0]),d[1]=n(a[1])-1,d[2]=n(a[2]),""});var h=v.setFullYear,m=v.setHours;f=f.replace(/[T\s](\d+):(\d+):?(\d+)?\.?(\d)?/,function(e,t,r,o,a){return d[3]=n(t),d[4]=n(r),d[5]=n(o),a&&(d[6]=Math.round(1e3*parseFloat("0."+a))),""});var g=0,y=0;f=f.replace(/Z|([+-])(\d\d):?(\d\d)/,function(e,t,r,o){return h=v.setUTCFullYear,m=v.setUTCHours,t&&(g=n(t+r),y=n(t+o)),""}),d[3]-=g,d[4]-=y,h.apply(v,d.slice(0,3)),m.apply(v,d.slice(3)),e=v}if("number"==typeof e&&(e=new Date(e)),"date"===avalon.type(e)){for(;t;)o=u.exec(t),o?(s=s.concat(o.slice(1)),t=s.pop()):(s.push(t),t=null);return s.forEach(function(t){r=c[t],i+=r?r(e,a):t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),i}}var c={yyyy:o("FullYear",4),yy:o("FullYear",2,0,!0),y:o("FullYear",1),MMMM:a("Month"),MMM:a("Month",!0),MM:o("Month",2,1),M:o("Month",1,1),dd:o("Date",2),d:o("Date",1),HH:o("Hours",2),H:o("Hours",1),hh:o("Hours",2,-12),h:o("Hours",1,-12),mm:o("Minutes",2),m:o("Minutes",1),ss:o("Seconds",2),s:o("Seconds",1),sss:o("Milliseconds",3),EEEE:a("Day"),EEE:a("Day",!0),a:s,Z:i},u=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,p=/^\/Date\((\d+)\)\/$/,f={AMPMS:{0:"上午",1:"下午"},DAY:{0:"星期日",1:"星期一",2:"星期二",3:"星期三",4:"星期四",5:"星期五",6:"星期六"},MONTH:{0:"1月",1:"2月",2:"3月",3:"4月",4:"5月",5:"6月",6:"7月",7:"8月",8:"9月",9:"10月",10:"11月",11:"12月"},SHORTDAY:{0:"周日",1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六"},fullDate:"y年M月d日EEEE",longDate:"y年M月d日",medium:"yyyy-M-d H:mm:ss",mediumDate:"yyyy-M-d",mediumTime:"H:mm:ss","short":"yy-M-d ah:mm",shortDate:"yy-M-d",shortTime:"ah:mm"};f.SHORTMONTH=f.MONTH,l.locate=f,e.exports=l},function(e,t){function n(e,t,n){var r=avalon.type(e);if("array"!==r&&"object"!==r)throw"orderBy只能处理对象或数组";var o=n&&0>n?-1:1;if("string"==typeof t){var a=t;t=function(e){return e&&e[a]}}e=s(e),e.forEach(function(e){e.order=t(e.value,e.key)}),e.sort(function(e,t){var n=e.order,r=t.order;return Number.isNaN(n)&&Number.isNaN(r)?0:n===r?0:n>r?o:-o});var l="array"===r,c=l?[]:{};return i(c,e,function(e){l?c.push(e.value):c[e.key]=e.value})}function r(e,t){var n=avalon.type(e);if("array"!==n&&"object"!==n)throw"filterBy只能处理对象或数组";var r=avalon.slice(arguments,2),o=avalon.type(t);if("function"===o)var a=t;else{if("string"!==o&&"number"!==o)return e;if(""===t)return e;var l=new RegExp(avalon.escapeRegExp(t),"i");a=function(e){return l.test(e)}}e=s(e).filter(function(e,t){return!!a.apply(e,[e.value,t].concat(r))});var c="array"===n,u=c?[]:{};return i(u,e,function(e){c?u.push(e.value):u[e.key]=e.value})}function o(e,t,n){if(avalon.isObject(e)&&!Array.isArray(e)){var r=[];return i(r,t,function(t){r.push(e.hasOwnProperty(t)?e[t]:n?n[t]:"")})}return e}function a(e,t,n){var r=avalon.type(e);if("array"!==r&&"object"!==r)throw"limitBy只能处理对象或数组";if(t=Math.abs(Number(t))===1/0?Number(t):parseInt(t,10),Number.isNaN(t))return e;"object"===r&&(e=s(e)),t=Math.min(e.length,t),n=!n||Number.isNaN(n)?0:~~n,0>n&&(n=Math.max(0,e.length+n));for(var o=[],a=n;t>a;a++)o.push(e[a]);var l="array"===r;if(l)return o;var c={};return i(c,o,function(e){c[e.key]=e.value})}function i(e,t,n){for(var r=0,o=t.length;o>r;r++)n(t[r]);return e}function s(e){var t=[],n=0;return avalon.each(e,function(e,r){t[n++]={value:r,key:e}}),t}Number.isNaN=Number.isNaN||function(e){return e!==e},e.exports={limitBy:a,orderBy:n,selectBy:o,filterBy:r}},function(e,t){var n={stop:function(e){return e.stopPropagation(),e},prevent:function(e){return e.preventDefault(),e}},r={esc:27,tab:9,enter:13,space:32,del:46,up:38,left:37,right:39,down:40};avalon.each(r,function(e,t){n[e]=function(e){return e.which!==t&&(e.$return=!0),e}}),e.exports=n},function(e,t,n){var r=n(16),o=n(17),a=n(18);avalon.vdomAdaptor=function(e,t){if(!e)return"toHTML"===t?"":avalon.avalonFragment.cloneNode(!1);switch(e.nodeType){case 3:return r.prototype[t].call(e);case 8:return o.prototype[t].call(e);default:return a.prototype[t].call(e)}},e.exports={VText:r,VComment:o,VElement:a}},function(e,t){function n(e){if("string"==typeof e)this.type="#text",this.nodeValue=e,this.skipContent=!r.test(e),this.nodeType=3;else for(var t in e)this[t]=e[t]}var r=avalon.config.rexpr;n.prototype={constructor:n,toDOM:function(){return document.createTextNode(this.nodeValue)},toHTML:function(){return this.nodeValue}},e.exports=n},function(e,t){function n(e){if("string"==typeof e)this.type="#comment",this.nodeValue=e,this.skipContent=!0,this.nodeType=8;else for(var t in e)this[t]=e[t]}n.prototype={constructor:n,toDOM:function(){return document.createComment(this.nodeValue)},toHTML:function(){return"<!--"+this.nodeValue+"-->"}},e.exports=n},function(e,t){function n(e,t,n){if("object"==typeof e)for(var r in e)this[r]=e[r];else this.nodeType=1,this.type=e,this.props=t,this.children=n,this.template=""}function r(e){return e!==!1&&Object(e)!==e}var o={"class":function(e,t){e.className=t},style:function(e,t){e.style.cssText=t},"for":function(e,t){e.htmlFor=t}};n.prototype={constructor:n,toDOM:function(){var e=document.createElement(this.type);for(var t in this.props){var n=this.props[t];r(n)&&(o[t]&&avalon.msie<8?o[t](e,n):e.setAttribute(t,n+""))}if(this.skipContent)switch(this.type){case"script":e.text=this.template;break;case"style":case"template":e.innerHTML=this.template;break;case"noscript":e.textContent=this.template;break;default:var a=avalon.parseHTML(this.template);e.appendChild(a)}else this.isVoidTag||(this.children.length?this.children.forEach(function(t){t&&e.appendChild(avalon.vdomAdaptor(t,"toDOM"))}):e.appendChild(avalon.parseHTML(this.template)));return e},toHTML:function(){var e=[];for(var t in this.props){var n=this.props[t];r(n)&&e.push(t+"="+avalon.quote(this.props[t]+""))}e=e.length?" "+e.join(" "):"";var o="<"+this.type+e;return this.isVoidTag?o+"/>":(o+=">",o+=this.children.length?this.children.map(function(e){return e?avalon.vdomAdaptor(e,"toHTML"):""}).join(""):this.template,o+"</"+this.type+">")}},e.exports=n},,,,,,,,function(e,t){function n(e){this.size=0,this.limit=e,this.head=this.tail=void 0,this._keymap={}}var r=n.prototype;r.put=function(e,t){var n={key:e,value:t};return this._keymap[e]=n,this.tail?(this.tail.newer=n,n.older=this.tail):this.head=n,this.tail=n,this.size===this.limit?this.shift():this.size++,t},r.shift=function(){var e=this.head;e&&(this.head=this.head.newer,this.head.older=e.newer=e.older=this._keymap[e.key]=void 0,delete this._keymap[e.key])},r.get=function(e){var t=this._keymap[e];if(void 0!==t)return t===this.tail?t.value:(t.newer&&(t===this.head&&(this.head=t.newer),t.newer.older=t.older),t.older&&(t.older.newer=t.newer),t.newer=void 0,t.older=this.tail,this.tail&&(this.tail.newer=t),this.tail=t,t.value)},e.exports=n},function(e,t){function n(e){var t="undefined"!=typeof e.querySelectorAll?e.querySelectorAll("script"):e.getElementsByTagName("script");if(t.length)for(var n,a=0;n=t[a++];)if(o[n.type]){var i=r.cloneNode(!1);Array.prototype.forEach.call(n.attributes,function(e){e&&e.specified&&(i[e.name]=e.value,i.setAttribute(e.name,e.value))}),i.text=n.text,n.parentNode.replaceChild(i,n)}}var r=avalon.document.createElement("script"),o=avalon.oneObject(["","text/javascript","text/ecmascript","application/ecmascript","application/javascript"]);e.exports=n},,,,,function(e,t){e.exports={click:!0,dblclick:!0,keydown:!0,keypress:!0,keyup:!0,mousedown:!0,mousemove:!0,mouseup:!0,mouseover:!0,mouseout:!0,wheel:!0,mousewheel:!0,input:!0,change:!0,beforeinput:!0,compositionstart:!0,compositionupdate:!0,compositionend:!0,select:!0,cut:!0,copy:!0,paste:!0,beforecut:!0,beforecopy:!0,beforepaste:!0,focusin:!0,focusout:!0,DOMFocusIn:!0,DOMFocusOut:!0,DOMActivate:!0,dragend:!0,datasetchanged:!0}},,function(e,t){function n(e,t){for(var i,s=0;i=e[s++];)if(1===i.nodeType){var l=o(i);l&&++a;var c=avalon.vmodels[l];if(c&&!c.$element){r(i),avalon(i).removeClass("ms-controller"),c.$element=i;var u=new Date;i.vtree=avalon.lexer(i.outerHTML.trim());var p=new Date;avalon.log("create primitive vtree",p-u),c.$render=avalon.render(i.vtree);var f=new Date;avalon.log("create template Function ",f-p),avalon.rerenderStart=f,avalon.batch(l,!0),"function"==typeof t&&t(c)}else l||n(i.childNodes,t)}}function r(e){for(var t,n=0;n<e.childNodes.length;n++){var o=e.childNodes[n];3!==o.nodeType||i.test(o.nodeValue)?1===o.nodeType&&r(o):(t=e.removeChild(o),n--)}0===e.childNodes.length&&t&&e.appendChild(t)}function o(e){return e.getAttribute("ms-controller")||e.getAttribute("ms-important")}var a=0,i=/\S/;e.exports=avalon.scan=function(e,t){return e&&e.nodeType?(n([e],t),void(a=0)):void avalon.warn("[avalon.scan] first argument must be element , documentFragment, or document")}},,function(e,t,n){var r=n(37),o=n(44);avalon.directive("important",{priority:1,parse:function(e,t,n){delete t.props["ms-important"];var o=n.expr,a=avalon.quote(o),i=["\n/*----ms-important----*/","vnodes = vnodes.concat((function(){","var __vmodel__ = avalon.vmodels["+a+"];","if(__vmodel__){",r([t]),"}else{",'	return {nodeType:8,type:"#comment",nodeValue:"vm '+o+' inexistence"}',"}","})())","/*----ms-important----*/\n"].join("\n ");t.$append=i},diff:function(e,t,n,r){t.props[r]!==e.props[r]&&o(e,this.update,n,"important")},update:function(e,t){var n=t.props["ms-important"],r=avalon.vmodels[n];r.$render=t.render,r.$element=e}})},function(e,t,n){function r(e){return g.test(e)?e:p(e,"text")}function o(e){for(var t,n=["\nvar vnodes = [];"],r=[],o=0;t=e[o++];){var a=s(t,r);t.$prepend&&n.push(t.$prepend),a&&n.push(a+"\n"),t.$append&&n.push(t.$append)}return n.push("return vnodes\n"),n.join("\n")}function a(e){return y.test(e)||b[e]?h(e):e}function i(e){return"vnodes.push("+e+");"}function s(e,t){var n=avalon.directives;if(3===e.nodeType)return v.rexpr.test(e.nodeValue)?i(l(e)):u(e);if(1===e.nodeType){var r=e.props;0===e.type.indexOf("ms-")&&(r["ms-widget"]||(r["ms-widget"]="{is:"+h(e.type)+"}"));var a={props:{},type:e.type,nodeType:1,template:""},s=f(a,r);if(s.length||(a.skipAttrs=!0),a.order=s.map(function(t){return n[t.type].parse(a,e,t),t.name}).join(";;"),e.isVoidTag)a.isVoidTag=!0;else if(!("children"in a)){var p=e.children;p.length?a.children="(function(){"+o(p)+"})()":(a.template=e.template,a.children="[]")}return"imporant"===s.name?"":i(c(a,{vmodel:1,bottom:1,top:1,mediator:1}))}if(8===e.nodeType){var d=e.nodeValue;if(w.test(d)){0!==d.indexOf("ms-for:")&&avalon.error("ms-for指令前不能有空格"),t.push(e);var a=avalon.mix({directive:"for",vmodel:"__vmodel__"},e);return n["for"].parse(a,e,e),i(c(a,{vmodel:1}))}if(x.test(d)){var m=t[t.length-1],g=m.signature;return 0!==d.indexOf("ms-for-end:")&&avalon.error("ms-for-end指令前不能有空格"),e.$append=u({nodeType:8,type:"#comment",nodeValue:g,key:"traceKey"},{key:1})+"\n\n})",t.length&&(e.$append+="\n"+g+".end ="+u({nodeType:8,type:"#comment",signature:g,nodeValue:"ms-for-end:"})+"\n",t.pop()),""}return u(0===d.indexOf("ms-js:")?e:e)}}function l(e){var t=d(e.nodeValue),n="";if(1===t.length)n=r(t[0].expr);else{var o=t.map(function(e){return e.type?r(e.expr):h(e.expr)}).join(" + ");n="String("+o+")"}return'{\ntype: "#text",\nnodeType:3,\nfixIESkip: true,\nnodeValue: '+n+"\n}"}function c(e,t){var n=[];for(var r in e)if("props"===r){var o=[];for(var i in e.props){var s=e.props[i];"string"==typeof s&&"ms-"!==i.slice(0,3)&&-1==s.indexOf("(function()")&&'"'!=s.charAt(0)&&(s=h(s)),o.push(a(i)+": "+s)}n.push("	props: {"+o.join(",\n")+"}")}else{var l=e[r];"string"==typeof l&&"children"!==r&&(l=t&&t[r]?l:h(l)),n.push(a(r)+":"+l)}return"{\n"+n.join(",\n")+"}"}function u(e,t){var n=[];t=t||{};for(var r in e)e.hasOwnProperty(r)&&(t[r]?n.push("	"+a(r)+": "+e[r]):n.push("	"+a(r)+": "+h(e[r])));return i("{\n"+n.join(",\n")+"}")}var p=n(38),f=n(41),d=n(42),v=avalon.config,h=avalon.quote,m=(avalon.makeHashCode,n(40)),g=m.ident,y=(m.sp,/[W-]/),b=n(43),w=/^\s*ms\-for:/,x=/^\s*ms\-for\-end:/;avalon.parseNodes=o,e.exports=o},function(e,t,n){function r(e,t){function n(e){var t="??"+b++;return w[t]=e,t}function r(e){return w[e]}var m={};if(t=t||"other","object"==typeof e&&(t=e.type,m=e,e=m.expr),"string"!=typeof e)return"";var g=e,y=a.get(t+":"+g);if(y)return y;var b=1,w={},x=e.replace(i,n).replace(s,n).replace(u,n).replace(f,"$1").split(p),T=x.shift().replace(l,r).trim();if("on"===t&&h.test(T)&&(T+="($event)"),T=T.replace(v,"$1__vmodel__."),"js"===t)return a.put(t+":"+g,T);var _=x.map(function(e){e=e.replace(l,r).replace(v,"$1__vmodel__.");var t=!1;return e=e.replace(c,function(e,n){return t=!0,/\S/.test(n)?"(__value__,"+n+");":"(__value__);"}),t||(e+="(__value__);"),e=e.replace(/(\w+)/,'avalon.__format__("$1")'),"__value__ = "+e}),E=[];if("on"===t)_=_.map(function(e){return e.replace(/__value__/g,"$event")}),_.length&&_.push("if($event.$return){\n	return;\n}"),avalon.modern||(T=T.replace(/__vmodel__\.([^(]+)\(([^)]*)\)/,function(e,t,n){return"__vmodel__."+t+".call(__vmodel__"+(/\S/.test(n)?","+n:"")+")"})),E=["function ms_on($event){","try{","	var __vmodel__ = this;","	"+T,"}catch(e){",o(e,t),"}","}"],_.unshift(2,0);else{if("duplex"===t){var C=["function (__vmodel__){","try{","return "+T+"\n","}catch(e){",o(e,t),"}","}"];a.put("duplex:"+g,d(C));var A=["function (__vmodel__,__value__){","try{","	"+T+" = __value__","}catch(e){",o(e,t),"}","}"];if(a.put("duplex:set:"+g,d(A)),x.length){var $=["function (__vmodel__, __value__){","try{",_.join("\n"),"return __value__\n","}catch(e){",o(e,t),"}","}"];a.put("duplex:format:"+g,d($))}return}E=["(function(){","try{","var __value__ = "+T,"text"===t?'return __value__ == null ? "" :__value__':"return __value__","}catch(e){",o(e,t),'	return ""',"}","})()"],_.unshift(3,0)}return E.splice.apply(E,_),y=E.join("\n"),a.put(t+":"+g,y),y}function o(e,t){return"	avalon.warn(e, "+avalon.quote("parse "+t+" binding【 "+e+" 】fail")+")"}var a=n(39),i=/(^|[^\/])\/(?!\/)(\[.+?]|\\.|[^\/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/g,s=n(40).string,l=/\?\?\d+/g,c=/\(([^)]*)\)/,u=/\|\|/g,p=/\|(?=\w)/,f=/\s*(\.|\|)\s*/g,d=function(e){return"(function(){ return "+e.join("\n")+"})()\n"},v=/(^|[^\w\u00c0-\uFFFF_])(@|##)(?=[$\w])/g,h=/^(?:\@|##)[$\w]+$/i;e.exports=avalon.parseExpr=r},function(e,t,n){var r=n(26);e.exports=new r(512)},function(e,t){e.exports={ident:/^[$a-zA-Z_][$a-zA-Z0-9_]*$/,sp:/^\s+$/,leftSp:/^\s+/,rightSp:/s+$/,binding:/^ms-(\w+)-?(.*)/,string:/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/g}},function(e,t,n){function r(e,t){var n=[],r="ms-skip"in t,l={};for(var c in t){var u,p=t[c];if(!r&&(u=c.match(i))){var f=u[1],d=u[2]||"",v=c;if(s[f]){var h=parseFloat(d)||0;d=f,f="on"}if(v="ms-"+f+(d?"-"+d:""),c!==v&&(delete t[c],t[v]=p),a[f]){var m={type:f,param:d,name:v,expr:p,priority:a[f].priority||100*f.charCodeAt(0)};"on"===f&&(h=h||0,m.name+="-"+h,m.priority+=100*d.charCodeAt(0)+h),l[m.name]||(l[m.name]=1,n.push(m))}}else e.props[c]=t[c]}n.sort(o);for(var g,y=[],b=0;g=n[b++];){var v=g.name;if(y.name=v,y.push(g),"important"===v||"widget"===v)break}return y}function o(e,t){return e.priority-t.priority}var a=avalon.directives,i=n(40).binding,s=avalon.oneObject("animationend,blur,change,input,click,dblclick,focus,keydown,keypress,keyup,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,scan,scroll,submit");e.exports=r},function(e,t,n){function r(e){for(var t,n,r=[],s=0;;){if(n=e.indexOf(i.openTag,s),-1===n)break;if(t=e.slice(s,n),0===s&&(t=t.replace(a.leftSp,"")),t&&r.push({expr:t}),s=n+i.openTag.length,n=e.indexOf(i.closeTag,s),-1===n)break;t=e.slice(s,n),t&&r.push({expr:t.replace(o,""),type:"{{}}"}),s=n+avalon.config.closeTag.length}t=e.slice(s);var l=t.replace(a.rightSp,"");return l&&r.push({expr:l.replace(/^\s+$/," ")}),r}var o=/\r?\n/g,a=n(40),i=avalon.config;e.exports=r},function(e,t){e.exports=avalon.oneObject("break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile")},function(e,t){e.exports=function(e,t,n,r,o){o=o||"change";var a=e[o]||(e[o]=[]);avalon.Array.ensure(a,t)&&(n.count+=1,avalon.config.showDiff&&avalon.log(r+" change"))}},function(e,t,n){var r=n(44);avalon.skipController=function(e,t,n){if(e){var r=t.$render?t.$render.$id:t.$id;return e.length>r.length?0!==e.indexOf(r+";;"):0!==r.indexOf(e)}return!1},avalon.directive("controller",{priority:2,parse:function(e,t,n){var r=avalon.quote(n.expr);delete t.props["ms-controller"],e.props["ms-controller"]=r,t.$prepend=["(function(topVm){","var bottomVm = avalon.vmodels["+r+"]","if(bottomVm && topVm){","__vmodel__ =  avalon.mediatorFactory(topVm, bottomVm)","var mediator = __vmodel__","}else{","__vmodel__ = topVm || bottomVm","}","if(!avalon.skipController(__fast__, bottomVm)){ "].join("\n")+"\n\n",e.mediator="mediator",e.vmodel="topVm",e.bottom="bottomVm",t.$append="}\n\n})(__vmodel__)"},diff:function(e,t,n,o){t.props[o]!==e.props[o]&&r(e,this.update,n,"controller")},update:function(e,t){function n(){return i(0,n.$id)}var r=t.vmodel,o=t.bottom,a=t.mediator;if(r&&o&&(o.$element=r&&r.$element||e,t.mediator=t.bottom=0,!o.$render)){var i=r.$render;i.$id||(i.$id=r.$id),o.$render=n,n.dom=o.$element,n.$id=i.$id+";;"+o.$id,a&&(a.$render=n)}}})},,,function(e,t){var n={"accept-charset":"acceptCharset","char":"ch",charoff:"chOff","class":"className","for":"htmlFor","http-equiv":"httpEquiv"},r=["autofocus,autoplay,async,allowTransparency,checked,controls","declare,disabled,defer,defaultChecked,defaultSelected,","isMap,loop,multiple,noHref,noResize,noShade","open,readOnly,selected"].join(",");r.replace(/\w+/g,function(e){n[e.toLowerCase()]=e});var o=["accessKey,bgColor,cellPadding,cellSpacing,codeBase,codeType,colSpan","dateTime,defaultValue,contentEditable,frameBorder,longDesc,maxLength,marginWidth,marginHeight,rowSpan,tabIndex,useMap,vSpace,valueType,vAlign"].join(",");o.replace(/\w+/g,function(e){n[e.toLowerCase()]=e}),e.exports=n},function(e,t,n){var r=n(44);avalon.directive("css",{diff:function(e,t,n,o){var a=e.props[o],i=t.props[o];if(Object(a)===a){if(Array.isArray(a)&&(a=e.props[o]=avalon.mix.apply({},a)),"object"!=typeof i)e.changeStyle=a;else{var s={},l=!1;for(var c in a)a[c]!==i[c]&&(l=!0,s[c]=a[c]);l&&(e.changeStyle=s)}e.changeStyle&&r(e,this.update,n,"css")}else e.props[o]=i},update:function(e,t){var n=t.changeStyle,r=avalon(e);for(var o in n)r.css(o,n[o]);delete t.changeStyle}})},function(e,t,n){function r(e,t){var n=e.ownerDocument,o=e.nodeName,i="_"+o;if(!r[i]){var s=n.body.appendChild(n.createElement(o));t=avalon.modern?getComputedStyle(s,null).display:s.currentStyle.display,n.body.removeChild(s),t===a&&(t="block"),r[i]=t}return r[i]}var o=n(44),a="none";avalon.parseDisplay=r,avalon.directive("visible",{diff:function(e,t,n,r){var a=e.props[r]=!!e.props[r];e.displayValue=t.displayValue,a!==t.props[r]&&o(e,this.update,n,"visible")},update:function(e,t){function n(){void 0!==o&&(e.style.display=o)}var o,i=t.props["ms-visible"],s=e.style.display;i?(s===a&&(o=t.displayValue,o||(e.style.display="")),""===e.style.display&&avalon(e).css("display")===a&&avalon.contains(e.ownerDocument,e)&&(o=r(e))):s!==a&&(o=a,t.displayValue=s),avalon.applyEffect(e,t,{hook:i?"onEnterDone":"onLeaveDone",cb:n})}})},,function(e,t,n){var r=n(40).ident,o=n(44);avalon.directive("text",{parse:function(e,t,n){e.children="[]",e.skipContent=!0;var o=r.test(n.expr)?n.expr:avalon.parseExpr(n);e.props[n.name]=o},diff:function(e,t,n,r){var a=e.props[r],i=t.props[r];e.children=t.children;var s=e.dom=t.dom;return a===i&&0!==e.children.length||(e.children[0]||(e.children[0]={type:"#text",nodeType:3}),e.children[0].nodeValue=a,s?this.update(s,e):o(e,this.update,n,"text")),t.dom=null,!1},update:function(e,t){var n=t.props["ms-text"];"textContent"in e?e.textContent=n+"":e.innerText=n+"",t.dom=e}})},function(e,t,n){var r=n(44),o=n(37),a={};avalon.htmlFactory2=function(e){if(a[e])return a[e];var t=avalon.lexer(e+"");return a[e]="(function(){"+o(t)+"})();"},avalon.directive("html",{parse:function(e,t,n){t.isVoidTag||(e.props[n.name]=avalon.parseExpr(n),delete t.children,e.children="[]",t.$append='\nvar el = vnodes[vnodes.length-1];\nvar HTMLRaw =  el.props["ms-html"];;\nvar HTMLParsed = avalon.htmlFactory2(HTMLRaw);\ntry{eval("el.children = " + HTMLParsed )}catch(e){};\n'+(t.$append||""))},diff:function(e,t,n,o){var a=e.props[o],i=(t.props||{})[o];a!==i&&r(e,this.update,n,"html")},update:function(e,t){if(1===e.nodeType){avalon.clearHTML(e);var n=document.createDocumentFragment();t.children.forEach(function(e){e&&n.appendChild(avalon.vdomAdaptor(e,"toDOM"))}),e.appendChild(n)}}})},function(e,t,n){function r(e){return Object.keys(e).filter(function(t){return e[t]}).join(" ")}function o(e){var t=e.target;avalon(t).addClass(t.getAttribute(u[e.type])||"")}function a(e){var t=e.target,n=u[e.type];avalon(t).removeClass(t.getAttribute(n)||""),"change-active"!==n&&avalon(t).removeClass(t.getAttribute("change-active")||"")}function i(e,t){var n=e.getAttribute("old-change-class")||"",r=t.props["ms-class"];avalon(e).removeClass(n).addClass(r),e.setAttribute("old-change-class",r)}var s=n(6).getLongID,l=n(44),c=avalon.directives;avalon.directive("class",{diff:function(e,t,n,i){var s=i.slice(3),c=e.props[i],u=t.props[i];if(void 0===u&&(u=""),t.classEvent)e.classEvent=t.classEvent;else{var p={};"hover"===s?(p.mouseenter=o,p.mouseleave=a):"active"===s&&(e.props.tabindex=e.props.tabindex||-1,p.tabIndex=e.props.tabindex,p.mousedown=o,p.mouseup=a,p.mouseleave=a),e.classEvent=p}t.classEvent=null;var f=avalon.noop;Array.isArray(c)?f=c.map(function(e){return e&&"object"==typeof e?r(e):e?e:""}).join(" "):avalon.isObject(c)?f=r(c):c||0===c?f=String(c):c||(f=""),f=e.props[i]=f.trim().replace(/\s+/," "),u!==f&&(e["change-"+s]=f,l(e,this.update,n,s))},update:function(e,t){if(e&&1===e.nodeType){var n=t.classEvent;if(n){for(var r in n)"tabIndex"===r?e[r]=n[r]:avalon.bind(e,r,n[r]);t.classEvent={}}var o=["class","hover","active"];o.forEach(function(n){var r="change-"+n,o=t[r];if(void 0!==o)if("class"===n)e&&i(e,t);else{var a=e.getAttribute("change-"+n);a&&avalon(e).removeClass(a),e.setAttribute(r,o)}})}}}),c.active=c.hover=c["class"];var u={mouseenter:"change-hover",mouseleave:"change-hover",mousedown:"change-active",mouseup:"change-active"};s(o),s(a)},function(e,t,n){var r=n(6).getLongID,o=n(26),a=new o(128),i=(avalon.quote,n(44)),s=/^ms-on-([a-z]+)/,l=/\|.+/g,c=/((?:\@|\$|\#\#)?\w+)/g,u=n(40).string;avalon.directive("on",{priority:3e3,parse:function(e,t,n){var o=n.expr.replace(u," ").replace(l,"").match(c),i=o.every(function(e){return"@"===e.charAt(0)||"##"===e.slice(0,2)||"$event"===e});if(e.vmodel="__vmodel__",i){var s=n.expr,p=a.get(s);if(!p){var p=Function("return "+avalon.parseExpr(n,"on"))(),f=r(p);a.put(s,p)}avalon.eventListeners[f]=p,e.props[n.name]="avalon.eventListeners."+f}else e.props[n.name]=avalon.parseExpr(n,"on")},diff:function(e,t,n,o){var a=e.props[o],l=(t.props||{})[o];if(a!==l){if("function"==typeof l&&"function"==typeof a){var c=l.uuid;return a.uuid=c,void(avalon.eventListeners[c]=a)}var u=o.match(s),p=u[1],f=p+":"+r(a);e.addEvents=e.addEvents||{},e.addEvents[f]=a,i(e,this.update,n,"on")}},update:function(e,t){if(e&&!(e.nodeType>1)){var n,r,o;e._ms_context_=t.vmodel;for(n in t.addEvents)r=n.split(":").shift(),o=t.addEvents[n],avalon.bind(e,r,o);delete t.addEvents}}})},,function(e,t){function n(e){o[this.tagName].call(this,e),!this.caret&&this._ms_field_&&this._ms_field_.update.call(this)}var r=!1;try{var o={},a=HTMLInputElement.prototype,i=HTMLTextAreaElement.prototype,s=HTMLInputElement.prototype;Object.getOwnPropertyNames(s),o.INPUT=Object.getOwnPropertyDescriptor(a,"value").set,Object.defineProperty(a,"value",{set:n}),o.TEXTAREA=Object.getOwnPropertyDescriptor(i,"value").set,Object.defineProperty(i,"value",{set:n}),r=!0}catch(l){}e.exports=r},function(e,t){function n(e,t){var n=e.expr,c=t.props.type,u=e.param,p="checked"===u,f=t.field={parsers:[],formatters:[],modelValue:NaN,viewValue:NaN,validators:"",parse:r,format:o};p&&(i.test(c)?(f.isChecked=!0,f.type="radio"):u=null);var d=t.props["data-duplex-changed"];if(d){var v=d+":cb";if(avalon.caches[v])f.callback=avalon.caches[v];else{var h=Function("return "+avalon.parseExpr(d,"on"));avalon.caches[v]=f.callback=h()}}var m=avalon.parsers[u];m&&f.parsers.push(m),a.test(n)&&(l.test(c)?avalon.warn(c+"不支持change过滤器"):f.isChanged=!0);var g=n.match(s);g&&(f.isChanged||(f.debounceTime=parseInt(g[1],10)||300)),e.expr=f.expr=n.trim(),/input|textarea|select/.test(t.type)?f.type||(f.type="select"===t.type?"select":"checkbox"===c?"checkbox":"radio"===c?"radio":"input"):"contenteditable"in t.props&&(f.type="contenteditable"),
avalon.parseExpr(e,"duplex")}function r(e){for(var t,n=0;t=this.parsers[n++];)e=t.call(this,e);return e}function o(e){for(var t=this.formatters,n=t.length;n--;)e=t[n](e);return e}var a=/\|\s*change\b/,i=/^(?:checkbox|radio)$/,s=/\|\s*debounce(?:\(([^)]+)\))?/,l=/^(file|button|reset|submit|checkbox|radio|range)$/;e.exports=n},,function(e,t){function n(e){e.validator&&avalon.directives.validate.validate(e,!1),e.callback&&e.callback.call(e.vmodel,{type:"changed",target:e.element})}var r={input:function(e){var t=this;e=e||"value";var r=t.element[e],o=r;r=t.format(r);var a=t.parse(r);r=a+"",a!==t.modelValue&&(t.set(t.vmodel,a),n(t)),o!==r&&(t.viewValue=r,t.element[e]=r)},radio:function(){var e=this;if(e.isChecked){var t=e.modelValue=!e.modelValue;e.set(e.vmodel,t),n(e)}else r.input.call(e)},checkbox:function(){var e=this,t=e.modelValue;Array.isArray(t)||(avalon.warn("ms-duplex应用于checkbox上要对应一个数组"),t=[t]);var r=e.element.checked?"ensure":"remove";if(t[r]){var o=e.parse(e.element.value);t[r](o),n(e)}},select:function(){var e=this,t=avalon(e.element).val();t+""!=this.modelValue+""&&(t=Array.isArray(t)?t.map(function(t){return e.parse(t)}):e.parse(t),e.modelValue=t,e.set(e.vmodel,t),n(e))},contenteditable:function(){r.input.call(this,"innerHTML")}};e.exports=r},,function(e,t){e.exports=function(e,t){var n=t.field,r=t.props["ms-rules"];if(r&&!n.validator)for(;e&&1===e.nodeType;){var o=e._ms_validator_;if(o){n.rules=r,n.validator=o,avalon.Array.ensure(o.fields,n)&&o.addField(n);break}e=e.parentNode}}},function(e,t,n){function r(){var e=this.data||{};return this.message.replace(i,function(t,n){return null==e[n]?"":e[n]})}var o=n(44),a=avalon.directive("validate",{diff:function(e,t,n,r){var i=e.props[r],s=t.props[r];if(s&&s.onError&&s.addField)e.props[r]=s;else if(Object(i)===i){i.$id&&(i=i.$model),e.props[r]=i;for(var r in a.defaults)i[r]||(i[r]=a.defaults[r]);i.fields=i.fields||[],o(e,this.update,n,"validate")}},update:function(e,t){var n=t.props["ms-validate"];e._ms_validator_=n,n.element=e,e.setAttribute("novalidate","novalidate"),n.validateAllInSubmit&&avalon.bind(e,"submit",function(e){e.preventDefault(),a.validateAll.call(n,n.onValidateAll)}),"function"==typeof n.onInit&&n.onInit.call(e)},validateAll:function(e){var t=this,n="function"==typeof e?e:t.onValidateAll,r=t.fields.filter(function(e){var n=e.element;return n&&!n.disabled&&t.element.contains(n)}).map(function(e){return a.validate(e,!0)}),o=[];Promise.all(r).then(function(e){for(var r,a=0;r=e[a++];)o=o.concat(r);if(t.deduplicateInValidateAll){var i={};o=o.filter(function(e){var t=e.element,n=t.uniqueID||(t.uniqueID=setTimeout("1"));return i[n]?!1:(i[n]=!0,!0)})}n.call(t.element,o)})},addField:function(e){var t=this,n=e.element;!t.validateInKeyup||e.isChanged||e.debounceTime||avalon.bind(n,"keyup",function(t){a.validate(e,0,t)}),t.validateInBlur&&avalon.bind(n,"blur",function(t){a.validate(e,0,t)}),t.resetInFocus&&avalon.bind(n,"focus",function(r){t.onReset.call(n,r,e)})},validate:function(e,t,n){var o=[],a=e.get(e.vmodel),i=e.element,s=e.validator;if(!i.disabled){for(var l in e.rules){var c=e.rules[l];if(c!==!1){var u,p,f=avalon.validators[l];o.push(new Promise(function(e,t){u=e,p=t}));var d=function(t){if(e.norequired&&""===a&&(t=!0),t)u(!0);else{var n={element:i,data:e.data,message:i.getAttribute("data-"+l+"-message")||i.getAttribute("data-message")||f.message,validateRule:l,getMessage:r};u(n)}};e.data={},e.data[l]=c,f.get(a,e,d)}}var v=[],h=Promise.all(o).then(function(e){for(var r,o=0;r=e[o++];)"object"==typeof r&&v.push(r);return t||(v.length?s.onError.call(i,v,n):s.onSuccess.call(i,v,n),s.onComplete.call(i,v,n)),v});return h}}}),i=/\\?{{([^{}]+)\}}/gm;a.defaults={addField:a.addField,onError:avalon.noop,onSuccess:avalon.noop,onComplete:avalon.noop,onReset:avalon.noop,validateInBlur:!0,validateInKeyup:!0,validateAllInSubmit:!0,resetInFocus:!0,deduplicateInValidateAll:!1}},function(e,t){function n(e){return"regexp"===avalon.type(e)}function r(e){if("string"==typeof e&&e){var t=e.split("-");if(3===t.length&&4===t[0].length){var n=~~t[0],r=~~t[1]-1,o=~~t[2],a=new Date(n,r,o);return a.getFullYear()===n&&a.getMonth()===r&&a.getDate()===o}}return!1}avalon.directive("rules",{parse:function(e,t,n){var r=n.expr;/{.+}/.test(r)&&(e.props[n.name]=avalon.parseExpr(n))},diff:avalon.noop});var o=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/i,a=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/;avalon.shadowCopy(avalon.validators,{pattern:{message:"必须匹配{{pattern}}这样的格式",get:function(e,t,r){var o=t.element,a=t.data;if(!n(a.pattern)){var i=o.getAttribute("pattern");a.pattern=new RegExp("^(?:"+i+")$")}return r(a.pattern.test(e)),e}},digits:{message:"必须整数",get:function(e,t,n){return n(/^\-?\d+$/.test(e)),e}},number:{message:"必须数字",get:function(e,t,n){return n(isFinite(e)),e}},required:{message:"必须填写",get:function(e,t,n){return n(""!==e),e}},equalto:{message:"密码输入不一致",get:function(e,t,n){var r=String(t.data.equalto),o=avalon(document.getElementById(r)).val()||"";return n(e===o),e}},date:{message:"日期格式不正确",get:function(e,t,n){var o=t.data;return n("regexp"===avalon.type(o.date)?o.date.test(e):r(e)),e}},url:{message:"URL格式不正确",get:function(e,t,n){return n(a.test(e)),e}},email:{message:"email格式不正确",get:function(e,t,n){return n(o.test(e)),e}},minlength:{message:"最少输入{{minlength}}个字",get:function(e,t,n){var r=parseInt(t.data.minlength,10);return n(e.length>=r),e}},maxlength:{message:"最多输入{{maxlength}}个字",get:function(e,t,n){var r=parseInt(t.data.maxlength,10);return n(e.length<=r),e}},min:{message:"输入值不能小于{{min}}",get:function(e,t,n){var r=parseInt(t.data.min,10);return n(parseFloat(e)>=r),e}},max:{message:"输入值不能大于{{max}}",get:function(e,t,n){var r=parseInt(t.data.max,10);return n(parseFloat(e)<=r),e}},chs:{message:"必须是中文字符",get:function(e,t,n){return n(/^[\u4e00-\u9fa5]+$/.test(e)),e}}})},function(e,t,n){var r=n(66),o=n(44);avalon.directive("if",{priority:6,parse:function(e,t,n){t.$prepend=(t.$prepend||"")+"var varIf = "+avalon.parseExpr(n)+"\nif(varIf){\n";var r=t.$append||"";t.$append='}else{\n\nvnodes.push({\nnodeType: 8,\ndirective:"if",\ntype: "#comment",\nnodeValue:"ms-if"\n})\n}'+r},diff:function(e,t,n){e.dom=t.dom,e.nodeType!==t.nodeType&&(e.steps=n,8===e.nodeType&&(e.props=t.props),o(e,this.update,n,"if"))},update:function(e,t,n){var o=e.nodeType,a=t.nodeType;if(o!==a){if(1===a){var i=t.dom;if(!i){i=avalon.vdomAdaptor(t,"toDOM"),t.dom=i;var s=t.props;for(var l in s)if(l.match(/ms\-on/g)){var c=s[l];"function"==typeof c&&(i._ms_context_=t.onVm,avalon.bind(i,l.split("-")[2],c))}t.onVm&&delete t.onVm}return n.replaceChild(i,e),t.steps.count&&r([i],[t],n,t.steps),avalon.applyEffect(e,t,{hook:"onEnterDone"}),t.steps=!1}8===a&&avalon.applyEffect(e,t,{hook:"onLeaveDone",cb:function(){var r=e._ms_if_||(e._ms_if_=document.createComment(t.nodeValue));n.replaceChild(r,e)}})}}})},function(e,t){function n(e,t,i,s){var l=e[0];if((l||i)&&s.count){i=i||l.parentNode;for(var c=0,u=t.length;u>c;c++){var p=t[c],f=l;if(!(avalon.msie<9&&!p.fixIESkip&&3===p.nodeType&&a.test(p.nodeValue))){if(f&&(l=f.nextSibling),"for"===p.directive&&p.forDiff){if(!f)return;if(1===f.nodeType){var d=document.createComment(p.nodeValue);i.insertBefore(d,f),p.endRepeat=document.createComment("ms-for-end:"),i.insertBefore(p.endRepeat,f.nextSibling),f=d}else p.endRepeat||(p.endRepeat=r(f));8!==f.nodeType&&(f=f.nextSibling),l=p.endRepeat.nextSibling}if(!1!==o(f,p,i,s,"change")){!p.skipContent&&p.children&&f&&1===f.nodeType&&n(avalon.slice(f.childNodes),p.children,f,s);var v=p.props&&p.props["ms-controller"];if(v&&f){var h=avalon.vmodels[v];h.$render&&(h.$render.dom=f)}if(o(f,p,i,s,"afterChange"),!s.count)break}else p.repeatCount&&(c+=p.repeatCount+1),o(f,p,i,s,"afterChange")}}}}function r(e){for(var e,t=0,n=[];e&&(8===e.nodeType&&(0===e.nodeValue.indexOf("ms-for:")?++t:0===e.nodeValue.indexOf("ms-for-end:")&&--t),n.push(e),e=e.nextSibling,0!==t););return n.pop()}function o(e,t,n,r,o){var a=t[o];if(a){for(var i;i=a.shift();)if(r.count-=1,!1===i(e,t,n))return!1;delete t[o]}}var a=/^\s*$/;e.exports=n},function(e,t,n){function r(e){var t=typeof e;return e&&"object"===t?e.$hashcode:t+":"+e}function o(e,t){for(var n,r=t.signature,o=[],a=[],i={children:[]},s=0;n=e[s];s++)8===n.nodeType&&n.nodeValue===r?(i.children.push(n),i.key=n.key,a.push(n.key),i.index=o.length,o.push(i),i={children:[]}):i.children.push(n);t.components=o,t.compareText=a.length+"|"+a.join(";;")}function a(e,t,n){for(var r=[],o=[],a=[],i=e;i&&i!==t;i=i.nextSibling)o.push(i),8===i.nodeType&&i.nodeValue===n?(a.push(i),r.push(a),a=[]):a.push(i);return r.all=o,r}function i(e){for(var t,n=0;t=e[n++];)t.dom&&(t.dom=null),t.children&&i(t.children)}function s(e,t){var n=t.match(b);if(n){var r=n[1];for(var o in e){var a=o.match(w);if(a&&a[1]===r)return l(e,o)}}}function l(e,t){var n=e[t],r=t;if(n){var o=e["***"+t];if(o){var a=o.pop();return delete e[a.id],0==o.length&&delete e["***"+t],a.c}for(var i=[{id:t,c:n}];;){if(t+="_",!e[t])break;i.push({id:t,c:e[t]})}var a=i.pop();return delete e[a.id],i.length&&(e["***"+r]=i),a.c}return n}function c(e,t){var n=t.key;if(e[n]){for(;;)if(n+="_",!e[n]){e[n]=t;break}}else e[n]=t}var u=n(66),p=/ms-for\:\s*/,f=/^\s*\(\s*/,d=/\s*\)\s*$/,v=/\s*,\s*/,h=/\s+as\s+([$\w]+)/,m=n(40).ident,g=n(44),y=/^(null|undefined|NaN|window|this|\$index|\$id)$/;avalon._each=function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++){var o=e[n],a=r(o);t(n,o,a)}else for(var n in e)e.hasOwnProperty(n)&&t(n,e[n],n)},avalon.directive("for",{priority:3,parse:function(e,t,n){var r,o=t.nodeValue;o=o.replace(h,function(e,t){return!m.test(t)||y.test(t)?avalon.error("alias "+t+" is invalid --- must be a valid JS identifier which is not a reserved name."):r=t,""});var a=o.replace(p,"").split(" in "),i="var loop = "+avalon.parseExpr(a[1])+" \n",s="var "+t.signature+" = vnodes[vnodes.length-1]\n",l=r?"var "+r+" = loop\n":"",c=a[0].replace(f,"").replace(d,"").split(v);1===c.length&&c.unshift("$key"),c.push("traceKey"),t.$append=i+s+l+"avalon._each(loop,function("+c.join(", ")+"){\n"},diff:function(e,t,n,r){var a=e[r],u=t[r]||{},p=e.slice(r,a.end);if(a.items=p.slice(1,-1),o(a.items,a),delete u.forDiff,a.compareText===u.compareText)return void avalon.shadowCopy(a,u);a.forDiff=!0;var f,d,v,h=!("directive"in u);h&&(u.items=[],u.components=[],u.repeatCount=0);var m=u.components.length;a.endRepeat=u.endRepeat;var y=Math.max(p.length-2,0)-u.repeatCount;if(y>0){for(var b=[r+1,0],f=0,y=y-1;y>f;f++)b.push(null);t.splice.apply(t,b)}else 0>y&&t.splice.apply(t,[r,Math.abs(y)]);if(a.action=h?"init":"update",h){var w=a.cache={};for(f=0;d=a.components[f];f++)c(w,d),d.action="enter",a.fixAction&&(d.action="move",d.domIndex=f);a.removedComponents={}}else{var w=u.cache;if(!w)return;var x=a.cache={};for(f=0;d=a.components[f];f++){var v=l(w,d.key);v?m--:m&&(v=s(w,d.key),v&&m--),d.action=v?"move":"enter",v&&(i(v.children),d.domIndex=v.index),c(x,d)}for(f in w){a.removedComponents=w;break}}return u.components.length=0,a.prevItems=u.items,a.steps=n,delete u.cache,delete u.items,g(a,this.update,n,"for"),r+p.length-1},update:function(e,t,n){var r=t.endRepeat,o=t.signature,i=a(e.nextSibling,r,o);0===i.length&&i.all.forEach(function(e){n.removeChild(e)});var s=avalon.avalonFragment,l=avalon.parseHTML(t.template);for(var c in t.removedComponents){var p=t.removedComponents[c],f=i[p.index];f&&(f.forEach(function(e,t){e.parentNode&&avalon.applyEffect(e,p.children[t],{hook:"onLeaveDone",cb:function(){e.parentNode.removeChild(e)},staggerKey:o+"leave"})}),p.children.length=0)}delete t.removedComponents;for(var d=e,v=[],c=0;c<t.components.length;c++){var h=t.components[c];if("enter"===h.action){var m=l.cloneNode(!0);m.appendChild(document.createComment(t.signature));var g=avalon.slice(m.childNodes);n.insertBefore(m,d.nextSibling),x(g,h.children,{hook:"onEnterDone",staggerKey:o+"enter"})}else if("move"===h.action){for(var y,b=s.cloneNode(!1),g=i[h.domIndex]||[],w=0;y=g[w++];)b.appendChild(y);n.insertBefore(b,d.nextSibling),x(g,h.children,{hook:"onMoveDone",staggerKey:o+"move"})}if(v.push.apply(v,g),d=g[g.length-1],!d)break}var T=t.items,_=t.steps,E=_.count;t.repeatCount=T.length,avalon.diff(T,t.prevItems,_),_.count!==E&&u(v,T,n,_);var C=avalon.caches[t.cid];return C&&C.call(t.vmodel,{type:"rendered",target:e,endRepeat:r,signature:t.signature}),!1}});var b=/^(string|number|boolean)/,w=/^_*(string|number|boolean)/,x=function(e,t,n){t.forEach(function(r,o){avalon.applyEffect(e[o],t[o],n)})}},,,function(e,t,n){function r(e,t){for(var n in e)if(e[n]!==t[n])return!0;return!1}function o(){if(!f.lock){var e=f[0];e&&(o.lock=!0,e())}}function a(e){var t=v.test(e)?1e3:1;return parseFloat(e)*t}function i(e,t,n){var r=e[t];r=Array.isArray(r)?r:"function"==typeof r?[r]:[],r.forEach(function(e){e&&e(n)})}function s(e){var t=e.toLowerCase();return function(n){var r,s=this.el,l=avalon(s),u=isFinite(n.stagger)?1e3*n.stagger:0;if(u&&n.staggerKey){var p=h.get(n.staggerKey)||h.put(n.staggerKey,{count:0,items:0});p.count++,p.items++}var d=p&&p.count||0,v=function(t){var a=t!==!1;s.animating=void 0,r=!0;var l=a?"Done":"Abort";i(n,"on"+e+l,s),avalon.unbind(s,c.transitionEndEvent),avalon.unbind(s,c.animationEndEvent),p&&0===--p.items&&(p.count=0),n.queue&&(f.lock=!1,f.shift(),o())};i(n,"onBefore"+e,s),n[t]?n[t](s,function(e){v(e!==!1)}):c.css&&(l.addClass(n[t+"Class"]),"leave"===t?l.removeClass(n.enterClass+" "+n.enterActiveClass):"enter"===t&&l.removeClass(n.leaveClass+" "+n.leaveActiveClass),l.bind(c.transitionEndEvent,v),l.bind(c.animationEndEvent,v),setTimeout(function(){r=NaN===avalon.root.offsetWidth,l.addClass(n[t+"ActiveClass"]);var e=window.getComputedStyle(s),o=e[c.transitionDuration],i=e[c.animationDuration],p=a(o)||a(i);0===!p?v(!1):u||setTimeout(function(){r||v(!1)},p+130)},17+u*d))}}function l(e){e.acton||(e.action=e.hook.replace(/^on/,"").replace(/Done$/,"").toLowerCase())}var c=n(71),u=n(26),p=n(44);avalon.directive("effect",{priority:5,diff:function(e,t,n,o){var a=e.props[o];if("string"==typeof a){var i=a;a=e.props[o]={is:i}}else Array.isArray(a)&&(a=e.props[o]=avalon.mix.apply({},a));if(a.action=a.action||"enter",Object(a)===a){var s=t.props[o];(Object(s)!==s||r(a,s))&&p(e,this.update,n,"effect","afterChange")}},update:function(e,t,n,r){if(!e.animating){e.animating=!0;var a=t.props["ms-effect"],i=a.is;if(r=r||{},!i)return avalon.warn("need is option");var s=avalon.effects;c.css&&!s[i]&&avalon.effect(i,{});var l=s[i];if(!l)return avalon.warn(i+" effect is undefined");var u=r.action||a.action,p=avalon.Effect;if("function"!=typeof p.prototype[u])return avalon.warn(u+" action is undefined");var d=new p(e),v=avalon.mix(r,l,a);v.queue?(f.push(function(){d[u](v)}),o()):setTimeout(function(){d[u](v)},4)}}});var f=[];avalon.effects={},avalon.effect=function(e,t){avalon.effects[e]=t||{},c.css&&(t.enterClass||(t.enterClass=e+"-enter"),t.enterActiveClass||(t.enterActiveClass=t.enterClass+"-active"),t.leaveClass||(t.leaveClass=e+"-leave"),t.leaveActiveClass||(t.leaveActiveClass=t.leaveClass+"-active")),t.action||(t.action="enter")};var d=function(e){this.el=e};avalon.Effect=d,d.prototype={enter:s("Enter"),leave:s("Leave"),move:s("Move")};var v=/\d+s$/,h=new u(128);avalon.applyEffect=function(e,t,n){var r=n.cb,o=n.hook,a=t.props&&t.props["ms-effect"];if(a&&!avalon.document.hidden){var i=a[o];r&&(Array.isArray(i)?i.push(r):i?a[o]=[i,r]:a[o]=[r]),l(n),e.animate=!0,avalon.directives.effect.update(e,t,0,avalon.shadowCopy({},n))}else r&&r()}},function(e,t){var n,r,o,a=!1,i=!1,s=!1,l=avalon.cssName("transition-duration"),c=avalon.cssName("animation-duration"),u={TransitionEvent:"transitionend",WebKitTransitionEvent:"webkitTransitionEnd",OTransitionEvent:"oTransitionEnd",otransitionEvent:"otransitionEnd"},p=avalon.window;for(var f in u){if(p[f]){o=u[f];break}try{document.createEvent(f);o=u[f];break}catch(d){}}"string"==typeof o&&(a=!0,s=!0,n=o),u={AnimationEvent:"animationend",WebKitAnimationEvent:"webkitAnimationEnd"};var v;for(f in u)if(p[f]){v=u[f];break}"string"==typeof v&&(i=!0,s=!0,r=v),e.exports={transition:a,animation:i,css:s,transitionEndEvent:n,animationEndEvent:r,transitionDuration:l,animationDuration:c}},function(e,t,n){function r(e){var t=o(e),n=Function("__vmodel__","__fast__",t);return n}avalon.lexer=n(73),avalon.diff=n(74),avalon.batch=n(75);var o=n(37);avalon.render=r,e.exports=avalon},function(e,t,n){function r(e){var t="??"+S++;return M[t]=e,t}function o(e){var t=M[e];return t}function a(e){return D.test(e)?e.replace(j,"").replace(k,r):e}function i(e,t,n){var i=[];if(n=n||1,"number"!=typeof t?t=0:t+=1,t>=n&&!O.rbind.test(e))return i;for(t||(e=e.replace(k,r));;){var u="",f=!1,v=e.match(b);if(v&&(u=v[0],f=new h(u.replace(A,o))),!f&&(v=e.match(w))){u=v[0],f=new m(v[1].replace(A,o));var x=f.nodeValue;if(_.test(x)){var E=i[i.length-1];E&&3===E.nodeType&&C.test(E.nodeValue)&&i.pop(),s(i)}}if(!f&&(v=e.match(g))){u=v[0];var S=v[1].toLowerCase();u=l(u,S),v=u.match(y);var D={};v[2]&&p(a(v[2]),D);var j=u.slice(v[0].length,-1*(S.length+3));f={nodeType:1,type:S,props:D,template:j.replace(A,o).trim(),children:[]},f=c(f,j,i,t,n)}if(f||(v=e.match(y),v&&(u=v[0],S=v[1].toLowerCase(),D={},v[2]&&p(a(v[2]),D),f={nodeType:1,type:S,props:D,template:"",children:[],isVoidTag:!0},f=c(f,"",i,t,n))),!f)break;i.push(f),e=e.slice(u.length),8===f.nodeType&&T.test(f.nodeValue)&&(f.signature=d("for"),e=e.replace($,""))}return t||(M={}),i}function s(e){for(var t,n=1,r=e.length,o=[];(t=e[--r])&&(8!==t.nodeType||(T.test(t.nodeValue)?n-=1:_.test(t.nodeValue)&&(n+=1),0!==n));)o.push(avalon.vdomAdaptor(t,"toHTML"));return t.template=o.reverse().join("")}function l(e,t){var n=[],r=[],o=L[t+"open"]||(L[t+"open"]=new RegExp("<"+t+N,I)),a=L[t+"close"]||(L[t+"close"]=new RegExp("</"+t+">",I));e.replace(o,function(e,t){return n.push(("0000000000"+t+"<").slice(-10)),e.replace(V,"1")}).replace(a,function(e,t){r.push(("0000000000"+t+">").slice(-10))});for(var i=n.concat(r).sort(),s=i.join("").replace(x,""),l=0,c=0,u=0,p=s.length;p>u;u++){var f=s.charAt(u);if("<"===f?l+=1:l-=1,0===l){c=u;break}}var d=parseFloat(i[c])+t.length+3;return e.slice(0,d)}function c(e,t,n,r,o){var a=e.type;if("ms-skip"in e.props)e.skipContent=!0;else{switch(a){case"style":case"script":case"noscript":case"template":case"textarea":e.skipContent=!0,"textarea"===a&&(e.props.type="textarea");break;case"input":e.props.type||(e.props.type="text");case"xmp":e.children.push(new h(e.template));break;case"option":e.children.push(new h(f(e.template)));break;default:if(!e.isVoidTag){var s=i(t,r,o);e.children=s,"table"===a&&u(e.children)}}var l=e.props["ms-for"];if(l){var c=e.props["data-for-rendered"],p=c+":cb";return delete e.props["ms-for"],n.push({nodeType:8,type:"#comment",nodeValue:"ms-for:"+l,signature:d("for"),cid:p,template:avalon.vdomAdaptor(e,"toHTML")}),c&&!avalon.caches[p]&&(avalon.caches[p]=Function("return "+avalon.parseExpr(c,"on"))()),n.push(e),{nodeType:8,skipContent:!0,type:"#comment",nodeValue:"ms-for-end:"}}}return e}function u(e){for(var t,n=!1,r=0,o=0,a=e.length,i=0;a>i;i++){var s=e[i];t?"tr"!==s.type&&1===s.nodeType?t=!1:(t.children.push(s),r++,e[i]=0):"tr"===s.type&&(t={nodeType:1,type:"tbody",template:"",children:[],props:{}},t.children.push(s),n=!0,0===o&&(o=i),e[i]=t)}if(n)for(i=o;a>i&&(0!==e[i]||(e.splice(i,1),i--,r--,0!==r));i++);}function p(e,t){e.replace(R,"=").replace(H,function(e){var n=e.split("="),r=n[1]||"",a=n[0].toLowerCase();2===n.length&&0===r.indexOf("??")&&(r=r.replace(A,o).slice(1,-1).replace(P,"&").replace(F,'"')),t[a]=r})}function f(e){return String(e).replace(z,"").trim()}var d=avalon.makeHashCode,v=n(15),h=v.VText,m=v.VComment,g=/^<([^\s>\/=.$<]+)(?:\s+[^=\s]+(?:=[^>\s]+)?)*\s*>(?:[\s\S]*)<\/\1>/,y=/^<([^\s>\/=.$<]+)\s*([^>]*?)\/?>/,b=/^[^<]+/,w=/^<!--([\w\W]*?)-->/,x=/\d+/g,T=/^\s*ms-for\:/,_=/^\s*ms-for-end\:/,E=n(40),C=E.sp,A=/\?\?\d+/g,$=E.leftSp,k=E.string,O=avalon.config,M={},S=1,D=/=["']/,j=/\n\s*/g,N="(?:\\s+[^>=]*?(?:=[^>]+?)?)*>",L={},V=/./g,I=avalon.msie<9?"ig":"g",P=/&amp;/g,H=/\S+/g,F=/&quot;/g,R=/\s*=\s*/g,z=/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi;e.exports=i},function(e,t,n){function r(e,t,n){if(e)for(var l=0;l<e.length;l++){var c=e[l],u=t[l]||i();switch(c.nodeType){case 3:c.skipContent||s.expr.diff(c,u,n);break;case 8:if("for"===c.directive){var p=s["for"].diff(e,t,n,l);"number"==typeof p&&(l=p)}else c.directive&&s[c.directive].diff(c,u,n);break;default:c.skipAttrs||o(c,u,n),c.skipContent||r(c.children,u.children||a,n)}}}function o(e,t,n){if(e.order)try{e.order.replace(/([^;]+)/g,function(r){var o=r.match(l),a=o&&o[1];return s[a]&&s[a].diff(e,t||i(),n,r),r})}catch(r){avalon.log(e,t,r,r.message,"diffProps error")}}var a=[],i=function(){return{children:[],props:{}}},s=avalon.directives,l=n(40).binding;avalon.diffProps=o,e.exports=r},function(e,t,n){function r(e,t){var n="string"==typeof e?avalon.vmodels[e]||{}:e;if(e=n.$id,s[e]?avalon.Array.ensure(l,e):s[e]=!0,"function"==typeof n.$render&&n.$element&&!c&&document.nodeName){var u=n.$element;a(function(){c=!0;var t=n.$render()||[],a={count:0};if(n.$render.dom){var l=o(t,n.$id);l&&(u=n.$render.dom,t=[l])}avalon.diff(t,u.vtree||[],a),i([u],t,null,a),a.count=0,u.vtree=t,c=!1,avalon.log("rerender",n.$id,new Date-avalon.rerenderStart),delete s[e];for(var p in s){r(p,!0,"for in");break}},t)}}function o(e,t){for(var n,r=0;n=e[r++];)if(1===n.nodeType){if(n.props["ms-controller"]===t)return n;if(n.children){var a=o(n.children,t);if(a)return a}}}function a(e,t){if(t){e();var n=l.shift();n&&r(n,!0)}else setTimeout(e,0)}var i=n(66),s={},l=[];avalon.suspendUpdate=0;var c=!1;e.exports=avalon.batch=r},,function(e,t){e.exports=avalon.oneObject("$id,$render,$track,$element,$watch,$fire,$events,$model,$skipArray,$accessors,$hashcode,__proxy__,__data__,__const__")},,,function(e,t,n){function r(e,t){t.__vmodel__=e;var n=f.hideProperty;n(e,"$events",t),n(e,"$watch",function(){if(2===arguments.length)return m.apply(e,arguments);throw"$watch方法参数不对"}),n(e,"$fire",function(t,n,r){var o=e.$events[t];h(o,e,t,n,r)})}function o(e,t,n){return"$"===e.charAt(0)||n[e]||"function"==typeof t||t&&t.nodeName&&t.nodeType>0}function a(e,t,n,r){if(Array.isArray(e))return f.arrayFactory(e,t,n,r);if(Object(e)===e&&"function"!=typeof e){if(t&&t.$id){if(++avalon.suspendUpdate,t.$track!==Object.keys(e).sort().join(";;"))var o=f.slaveFactory(t,e,n,r);else o=t;for(var a in e)d[a]||(o[a]=e[a]);return--avalon.suspendUpdate,o}return o=f.masterFactory(e,n,r)}return e}function i(e,t,n){function r(){return o}var o=NaN;return r.heirloom=n,{get:r,set:function(a){if(o!==a){a&&"object"==typeof a&&(a=f.modelAdaptor(a,o,n,{pathname:t,id:e}));var i=o;o=a;var u=n.__vmodel__;if(this.$hashcode&&u&&!avalon.suspendUpdate){n!==u.$events&&(r.heirloom=u.$events),l(r.$decompose,t,a,i),-1===t.indexOf("*")&&h(r.heirloom[t],u,t,a,i),s(e,u,t,a,i),c(r.heirloom,u,t,a,i),avalon.rerenderStart=new Date;var p=u.$id.indexOf(".");p>0?avalon.batch(u.$id.slice(0,p),!0):avalon.batch(u,!0)}}},enumerable:!0,configurable:!0}}function s(e,t,n,r,o){if(e.indexOf(".*.")>0){var a=e.match(g),i=avalon.vmodels[a[1]];if(i){var s=a[2];h(i.$events[s],t,n,r,o)}}}function l(e,t,n,r){if(e&&e[t]){var o=e[t];if(o.$hashcode){var a=t.replace(/^[^.]+\./,"");a!==t&&h(o.$events[a],o,a,n,r)}else delete e[t]}}function c(e,t,n,r,o){e.__fuzzy__&&e.__fuzzy__.replace(avalon.rword,function(a){var i=e[a],s=i.reg;return s&&s.test(n)&&h(i,t,n,r,o),a})}function u(e){var t=e.$id;if(!t&&avalon.config.debug&&avalon.warn("vm.$id must be specified"),avalon.vmodels[t])throw Error("error:["+t+"] had defined!");var n=f.masterFactory(e,{},{pathname:"",id:t,master:!0});return avalon.vmodels[t]=n}function p(e,t,n,r){if(t&&t.splice){var o=[0,t.length].concat(e);return++avalon.suspendUpdate,t.splice.apply(t,o),--avalon.suspendUpdate,t}for(var i in y)e[i]=y[i];e.notify=function(e,t,o,a){var i=n.__vmodel__;if(i){var s=null===e||void 0===e?r.pathname:r.pathname+"."+e;i.$fire(s,t,o),a||avalon.suspendUpdate||(avalon.rerenderStart=new Date,avalon.batch(i,!0))}};var s=avalon.makeHashCode("$");r.array=!0,r.hashcode=s,r.id=r.id||s,f.makeObserver(e,n,{},{},r);for(var l=0,c=e.length;c>l;l++)e[l]=a(e[l],0,{},{id:e.$id+".*",master:!0});return e}var f={},d=n(77),v=n(81),h=v.$emit,m=v.$watch;f.modelAdaptor=a;var g=/([^.]+)\.(.+)/;f.arrayFactory=p;var y={set:function(e,t){if(e>>>0===e&&this[e]!==t){if(e>this.length)throw Error(e+"set方法的第一个参数不能大于原数组长度");this.splice(e,1,t)}},contains:function(e){return-1!==this.indexOf(e)},ensure:function(e){return this.contains(e)||this.push(e),this},pushArray:function(e){return this.push.apply(this,e)},remove:function(e){return this.removeAt(this.indexOf(e))},removeAt:function(e){return e>>>0===e?this.splice(e,1):[]},clear:function(){return this.removeAll(),this}};avalon.define=u,e.exports={$$midway:f,$$skipArray:d,isSkip:o,__array__:y,makeFire:r,makeAccessor:i,modelAdaptor:a}},function(e,t){function n(e,t){var n,r=t.split(".")[0];try{e.hasOwnProperty(r)&&(n=e.$accessors?e.$accessors[r].get.heirloom.__vmodel__:Object.getOwnPropertyDescriptor(e,r).get.heirloom.__vmodel__)}catch(o){}return n||e}function r(e){var t=e.split(".");return new RegExp("^"+t.map(function(e){return"*"===e?"(?:[^.]+)":e}).join("\\.")+"$","i")}function o(e,t,n){e&&(t.__fuzzy__?-1===t.__fuzzy__.indexOf(","+n)&&(t.__fuzzy__+=","+n):t.__fuzzy__=n)}function a(e,t){var n=e.indexOf(".*")>0||"*"===e,i=n?this:a.adjust(this,e),s=i.$events,l=s[e]||(s[e]=[]);return n&&(l.reg=l.reg||r(e)),o(n,s,e),i!==this&&(o(n,this.$events,e),this.$events[e]=l),avalon.Array.ensure(l,t),function(){avalon.Array.remove(l,t)}}function i(e,t,n,r,o,a){if(e&&e.length)try{for(a=a||e.length-1;a>=0;a--){var s=e[a];s.call(t,r,o,n)}}catch(l){a-1>0&&i(e,t,n,r,o,a-1),avalon.log(l,n)}}a.adjust=n,e.exports={$emit:i,$watch:a,adjustVm:n}},,,function(e,t,n){var r=n(3),o=n(4);r.shadowCopy(r,o),n(85),n(6),n(7),e.exports=r},function(e,t){function n(e){if(e&&"object"==typeof e){var t=e.length,n=r.call(e);if(a.test(n))return!0;if("[object Object]"===n&&t===t>>>0)return!0}return!1}var r=avalon.inspect,o=/^\[object (?:Window|DOMWindow|global)\]$/,a=/(Array|List|Collection|Map|Arguments)\]$/;avalon.quote=JSON.stringify;var i={};"Boolean Number String Function Array Date RegExp Object Error".replace(avalon.rword,function(e){i["[object "+e+"]"]=e.toLowerCase()}),avalon.type=function(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?i[r.call(e)]||"object":typeof e},avalon.isFunction=function(e){return"function"==typeof e},avalon.isWindow=function(e){return o.test(r.call(e))},avalon.isPlainObject=function(e){return"[object Object]"===r.call(e)&&Object.getPrototypeOf(e)===Object.prototype},avalon.mix=avalon.fn.mix=function(){var e,t,n,r,o,a,i=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof i&&(c=i,i=arguments[1]||{},s++),"object"!=typeof i&&"function"!=typeof i&&(i={}),s===l&&(i=this,s--);l>s;s++)if(null!=(e=arguments[s]))for(t in e){n=i[t];try{r=e[t]}catch(u){continue}i!==r&&(c&&r&&(avalon.isPlainObject(r)||(o=Array.isArray(r)))?(o?(o=!1,a=n&&Array.isArray(n)?n:[]):a=n&&avalon.isPlainObject(n)?n:{},i[t]=avalon.mix(c,a,r)):void 0!==r&&(i[t]=r))}return i},avalon.each=function(e,t){if(e){var r=0;if(n(e))for(var o=e.length;o>r&&t(r,e[r])!==!1;r++);else for(r in e)if(e.hasOwnProperty(r)&&t(r,e[r])===!1)break}},e.exports={avalon:avalon,isArrayLike:n}},function(e,t,n){n(87),n(88),n(89),n(90),n(91),n(92),n(93),n(94),e.exports=avalon},function(e,t){function n(){return(new XMLSerializer).serializeToString(this)}function r(e,t){if(e&&e.childNodes)for(var n,a=e.childNodes,i=0;n=a[i++];)if(1===n.nodeType){var s=document.createElementNS(o,n.nodeName.toLowerCase());avalon.each(n.attributes,function(e,t){s.setAttribute(t.name,t.value)}),r(n,s),t.appendChild(s)}else t.appendChild(n.cloneNode(!0))}avalon.document.contains||(Node.prototype.contains=function(e){return!!(16&this.compareDocumentPosition(e))}),avalon.contains=function(e,t){try{for(;t=t.parentNode;)if(t===e)return!0;return!1}catch(n){return!1}};var o="http://www.w3.org/2000/svg",a=avalon.document.createElementNS(o,"svg");a.innerHTML='<circle fill="red" />',/^\[object SVG\w*Element\]$/.test(a.firstChild)||Object.defineProperties(SVGElement.prototype,{outerHTML:{configurable:!0,get:n,set:function(e){var t=this.tagName.toLowerCase(),n=this.parent,o=avalon.parseHTML(e);if("svg"===t)n.insertBefore(o,this);else{var a=document.createDocumentFragment();r(o,a),n.insertBefore(a,this)}n.removeChild(this)}},innerHTML:{configurable:!0,get:function(){var e=this.outerHTML,t=new RegExp("<"+this.nodeName+'\\b(?:(["\'])[^"]*?(\\1)|[^>])*>',"i"),n=new RegExp("</"+this.nodeName+">$","i");return e.replace(t,"").replace(n,"")},set:function(e){if(avalon.clearHTML){avalon.clearHTML(this);var t=avalon.parseHTML(e);r(t,this)}}}})},function(e,t){var n=/\S+/g;"add,remove".replace(avalon.rword,function(e){avalon.fn[e+"Class"]=function(t){var r=this[0]||{};return t&&"string"==typeof t&&1===r.nodeType&&t.replace(n,function(t){r.classList[e](t)}),this}}),avalon.fn.mix({hasClass:function(e){var t=this[0]||{};return 1===t.nodeType&&t.classList.contains(e)},toggleClass:function(e,t){var r="boolean"==typeof t,o=this;return String(e).replace(n,function(e){var n=r?t:!o.hasClass(e);o[n?"addClass":"removeClass"](e)}),this}})},function(e,t){avalon.parseJSON=JSON.parse,avalon.fn.attr=function(e,t){return 2===arguments.length?(this[0].setAttribute(e,t),this):this[0].getAttribute(e)}},function(e,t){function n(e,t){if(e.offsetWidth<=0){var r=getComputedStyle(e,null);if(u.test(r.display)){var o={node:e};for(var a in c)o[a]=r[a],e.style[a]=c[a];t.push(o)}var i=e.parentNode;i&&1===i.nodeType&&n(i,t)}}function r(e){return e.window||e.defaultView||!1}var o=avalon.root,a=avalon.camelize,i=avalon.cssHooks,s=["","-webkit-","-o-","-moz-","-ms-"],l={"float":"cssFloat"};avalon.cssNumber=avalon.oneObject("animationIterationCount,columnCount,order,flex,flexGrow,flexShrink,fillOpacity,fontWeight,lineHeight,opacity,orphans,widows,zIndex,zoom"),avalon.cssName=function(e,t,n){if(l[e])return l[e];t=t||o.style;for(var r=0,i=s.length;i>r;r++)if(n=a(s[r]+e),n in t)return l[e]=n;return null},avalon.fn.css=function(e,t){if(avalon.isPlainObject(e))for(var n in e)avalon.css(this,n,e[n]);else var r=avalon.css(this,e,t);return void 0!==r?r:this},avalon.fn.position=function(){var e,t,n=this[0],r={top:0,left:0};return n?("fixed"===this.css("position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),"HTML"!==e[0].tagName&&(r=e.offset()),r.top+=avalon.css(e[0],"borderTopWidth",!0),r.left+=avalon.css(e[0],"borderLeftWidth",!0),r.top-=e.scrollTop(),r.left-=e.scrollLeft()),{top:t.top-r.top-avalon.css(n,"marginTop",!0),left:t.left-r.left-avalon.css(n,"marginLeft",!0)}):r},avalon.fn.offsetParent=function(){for(var e=this[0].offsetParent;e&&"static"===avalon.css(e,"position");)e=e.offsetParent;return avalon(e||o)},i["@:set"]=function(e,t,n){e.style[t]=n},i["@:get"]=function(e,t){if(!e||!e.style)throw new Error("getComputedStyle要求传入一个节点 "+e);var n,r=getComputedStyle(e);return r&&(n="filter"===t?r.getPropertyValue(t):r[t],""===n&&(n=e.style[t])),n},i["opacity:get"]=function(e){var t=i["@:get"](e,"opacity");return""===t?"1":t},"top,left".replace(avalon.rword,function(e){i[e+":get"]=function(t){var n=i["@:get"](t,e);return/px$/.test(n)?n:avalon(t).position()[e]+"px"}});var c={position:"absolute",visibility:"hidden",display:"block"},u=/^(none|table(?!-c[ea]).+)/;avalon.each({Width:"width",Height:"height"},function(e,t){var r="client"+e,o="scroll"+e,a="offset"+e;i[t+":get"]=function(t,n,r){var o=-4;"number"==typeof r&&(o=r),n="Width"===e?["Left","Right"]:["Top","Bottom"];var i=t[a];return 2===o?i+avalon.css(t,"margin"+n[0],!0)+avalon.css(t,"margin"+n[1],!0):(0>o&&(i=i-avalon.css(t,"border"+n[0]+"Width",!0)-avalon.css(t,"border"+n[1]+"Width",!0)),-4===o&&(i=i-avalon.css(t,"padding"+n[0],!0)-avalon.css(t,"padding"+n[1],!0)),i)},i[t+"&get"]=function(e){var r=[];n(e,r);for(var o,a=i[t+":get"](e),s=0;o=r[s++];){e=o.node;for(var l in o)"string"==typeof o[l]&&(e.style[l]=o[l])}return a},avalon.fn[t]=function(n){
var s=this[0];if(0===arguments.length){if(s.setTimeout)return s["inner"+e];if(9===s.nodeType){var l=s.documentElement;return Math.max(s.body[o],l[o],s.body[a],l[a],l[r])}return i[t+"&get"](s)}return this.css(t,n)},avalon.fn["inner"+e]=function(){return i[t+":get"](this[0],void 0,-2)},avalon.fn["outer"+e]=function(e){return i[t+":get"](this[0],void 0,e===!0?2:0)}}),avalon.fn.offset=function(){var e=this[0];try{var t=e.getBoundingClientRect();if(t.width||t.height||e.getClientRects().length){var n=e.ownerDocument,r=n.documentElement,o=n.defaultView;return{top:t.top+o.pageYOffset-r.clientTop,left:t.left+o.pageXOffset-r.clientLeft}}}catch(a){return{left:0,top:0}}},avalon.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){avalon.fn[e]=function(n){var o=this[0]||{},a=r(o),i="scrollTop"===e;return arguments.length?void(a?a.scrollTo(i?a[t]:n,i?n:a[t]):o[e]=n):a?a[t]:o[e]}})},function(e,t){function n(e){var t=e.tagName.toLowerCase();return"input"===t&&/checkbox|radio/.test(e.type)?"checked":t}var r={"select:get":function o(e,t,n,a){var i,s=e.children;r["option:get"];n=t?n:e.selectedIndex,a=t?a:"select-one"===e.type||0>n,t=t||[];for(var l,c=0;l=s[c++];)if(!l.disabled)switch(l.nodeName.toLowerCase()){case"option":if(l.selected||l.index===n){if(i=l.value,a)return i;t.push(i)}break;case"optgroup":if(i=o(l,t,n,a),"string"==typeof i)return i}return a?null:t},"select:set":function(e,t,n){t=[].concat(t);for(var r,o=0;r=e.options[o++];)(r.selected=t.indexOf(r.value)>-1)&&(n=!0);n||(e.selectedIndex=-1)}};avalon.fn.val=function(e){var t=this[0];if(t&&1===t.nodeType){var o=0===arguments.length,a=o?":get":":set",i=r[n(t)+a];if(i)var s=i(t,e);else{if(o)return(t.value||"").replace(/\r/g,"");t.value=e}}return o?s:this}},function(e,t,n){var r=n(26),o=n(27),a=new function(){avalon.shadowCopy(this,{option:document.createElement("select"),thead:document.createElement("table"),td:document.createElement("tr"),area:document.createElement("map"),tr:document.createElement("tbody"),col:document.createElement("colgroup"),legend:document.createElement("fieldset"),_default:document.createElement("div"),g:document.createElementNS("http://www.w3.org/2000/svg","svg")}),this.optgroup=this.option,this.tbody=this.tfoot=this.colgroup=this.caption=this.thead,this.th=this.td},i={g:a.g};String("circle,defs,ellipse,image,line,path,polygon,polyline,rect,symbol,text,use").replace(avalon.rword,function(e){i[e]=a.g});var s,l=/<([\w:]+)/,c=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,u=/<|&#?\w+;/,p=new r(128),s=avalon.document.createElement("template");/HTMLTemplateElement/.test(s)||(s=null,avalon.shadowCopy(a,i)),avalon.parseHTML=function(e){var t,n=avalon.avalonFragment.cloneNode(!1);if("string"!=typeof e)return n;if(!u.test(e))return n.appendChild(document.createTextNode(e)),n;e=e.replace(c,"<$1></$2>").trim();var r=p.get(e);if(r)return r.cloneNode(!0);var t,f=(l.exec(e)||["",""])[1].toLowerCase(),d=i[f];if(d?d.innerHTML=e:s?(s.innerHTML=e,d=s.content):(d=a[f]||a._default,d.innerHTML=e),o(d),s)n=d;else for(;t=d.firstChild;)n.appendChild(t);return e.length<1024&&p.put(e,n.cloneNode(!0)),n},avalon.innerHTML=function(e,t){var n=this.parseHTML(t);this.clearHTML(e).appendChild(n)},avalon.clearHTML=function(e){for(avalon.$$unbind(e),e.textContent="";e.lastChild;)e.removeChild(e.lastChild);return e}},function(e,t,n){function r(e,t,n){var o=e.getAttribute("avalon-events");if(o&&(e.disabled!==!0||"click"!==t)){var a=[],i=h[t]||(h[t]=new RegExp(t+"\\:([^?s]+)","g"));o.replace(i,function(e,t){return a.push(t),e}),a.length&&n.push({elem:e,uuids:a})}e=e.parentNode;var s=avalon.gestureEvents||{};e&&e.getAttribute&&(p[t]||s[t])&&r(e,t,n)}function o(e){e=new i(e);var t=e.type,n=e.target,o=[];r(n,t,o);for(var a,s,l,c=0;(l=o[c++])&&!e.cancelBubble;)for(e.currentTarget=l.elem,a=0;(s=l.uuids[a++])&&!e.isImmediatePropagationStopped;){var u=avalon.eventListeners[s];if(u){var p=m.test(s)?l.elem._ms_context_:0;if(p&&p.$hashcode===!1)return avalon.unbind(n,t,u);if(g.test(t)){var f=+new Date;if(f-v>16){var d=u.call(p||n,e);v=f}}else d=u.call(p||n,e);d===!1&&(e.preventDefault(),e.stopPropagation())}}}function a(e){var t=c.getAttribute("delegate-events")||"";if(-1===t.indexOf(e)){var n=t.match(d)||[];n.push(e),c.setAttribute("delegate-events",n.join("??")),b(c,e,o,!!y[e])}}function i(e){if(e.originalEvent)return this;for(var t in e)x.test(t)||"function"==typeof e[t]||(this[t]=e[t]);this.timeStamp=new Date-0,this.originalEvent=e}var s=avalon.document,l=avalon.window,c=avalon.root,u=n(6).getShortID,p=n(32),f=avalon.eventHooks;avalon.bind=function(e,t,n){if(1===e.nodeType){var r=e.getAttribute("avalon-events")||"",i=u(n),s=f[t];s&&(t=s.type||t,s.fix&&(n=s.fix(e,n),n.uuid=i));var l=t+":"+i;avalon.eventListeners[n.uuid]=n,-1===r.indexOf(t+":")&&(p[t]||y[t]?a(t):b(e,t,o));var c=r.split("??");""===c[0]&&c.shift(),-1===c.indexOf(l)&&(c.push(l),e.setAttribute("avalon-events",c.join("??")))}else b(e,t,n);return n},avalon.unbind=function(e,t,n){if(1===e.nodeType){var r=e.getAttribute("avalon-events")||"";switch(arguments.length){case 1:w(e,t,o),e.removeAttribute("avalon-events");break;case 2:r=r.split("??").filter(function(e){return-1===e.indexOf(t+":")}).join("??"),e.setAttribute("avalon-events",r);break;default:var a=t+":"+n.uuid;r=r.split("??").filter(function(e){return e!==a}).join("??"),e.setAttribute("avalon-events",r),delete avalon.eventListeners[n.uuid]}}else w(e,t,n)};var d=/[^\s\?]+/g,v=Date.now(),h={},m=/^e\d+/,g=/move|scroll/,y={focus:!0,blur:!0},b=function(e,t,n,r){e.addEventListener(t,n,r)},w=function(e,t,n){e.removeEventListener(t,n)},x=/^(?:ms|webkit|moz)/;i.prototype={preventDefault:function(){var e=this.originalEvent;this.returnValue=!1,e&&(e.returnValue=!1,e.preventDefault())},stopPropagation:function(){var e=this.originalEvent;this.cancelBubble=!0,e&&(e.cancelBubble=!0,e.stopPropagation())},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=!0,e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},avalon.fireDom=function(e,t,n){var r=s.createEvent("Events");r.initEvent(t,!0,!0),avalon.shadowCopy(r,n),e.dispatchEvent(r)};var f=avalon.eventHooks;"onmouseenter"in c||avalon.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){f[e]={type:t,fn:function(t,n){return function(r){var o=r.relatedTarget;return o&&(o===t||16&t.compareDocumentPosition(o))?void 0:(delete r.type,r.type=e,n.call(this,r))}}}}),avalon.each({AnimationEvent:"animationend",WebKitAnimationEvent:"webkitAnimationEnd"},function(e,t){l[e]&&!f.animationend&&(f.animationend={type:t})}),void 0===s.onmousewheel&&(f.mousewheel={type:"wheel",fn:function(e,t){return function(e){e.wheelDeltaY=e.wheelDelta=e.deltaY>0?-120:120,e.wheelDeltaX=0,Object.defineProperty(e,"type",{value:"mousewheel"}),t.call(this,e)}}}),avalon.fn.bind=function(e,t,n){return this[0]?avalon.bind(this[0],e,t,n):void 0},avalon.fn.unbind=function(e,t,n){return this[0]&&avalon.unbind(this[0],e,t,n),this},avalon.$$unbind=function(e){var t=e.querySelectorAll("[avalon-events]");avalon.each(t,function(e,t){avalon.unbind(t)})}},function(e,t,n){var r,o=n(34),a=avalon.document,i=avalon.window,s=[],l=function(e){for(r=!0;e=s.shift();)e(avalon)};"complete"===a.readyState?setTimeout(l):a.addEventListener("DOMContentLoaded",l),avalon.bind(i,"load",l),avalon.ready=function(e){r?e(avalon):s.push(e)},avalon.ready(function(){o(a.body)})},function(e,t,n){n(36),n(45),n(96),n(49),n(50),n(98),n(52),n(53),n(54),n(55),n(99),n(63),n(64),n(65),n(67),n(102),n(70)},function(e,t,n){var r=n(97),o=n(44);avalon.directive("attr",{diff:function(e,t,n,a){var i=e.props[a],s=t.props[a];if(Object(i)===i){if(Array.isArray(i)&&(i=e.props[a]=avalon.mix.apply({},i)),"object"!=typeof s)e.changeAttr=i;else{var l={},c=!1;for(var u in i)i[u]!==s[u]&&(c=!0,l[u]=i[u]);c&&(e.changeAttr=l,n.count+=1)}e.changeAttr&&o(e,r,n,"attr")}else e.props[a]=s},update:r})},function(e,t,n){function r(e,t){var n=t.changeAttr;if(n)for(var r in n){var i=n[r];if("src"===r&&window.chrome&&"EMBED"===e.tagName){e[r]=i;var s=e.parentNode,l=document.createComment("ms-src");s.replaceChild(l,e),s.replaceChild(e,l)}else if(0==r.indexOf("data-"))e.setAttribute(r,i);else{var c=o[r]||r;if("boolean"==typeof e[c]&&(e[c]=!!i),i===!1){e.removeAttribute(r);continue}var u=a.test(e)?!1:r in e.cloneNode(!1);u?e[c]=i+"":e.setAttribute(r,i)}}t.changeAttr=null}var o=n(48),a=/^\[object SVG\w*Element\]$/;e.exports=r},function(e,t,n){var r=n(44);avalon.directive("expr",{parse:function(){},diff:function(e,t,n){e.nodeValue!==t.nodeValue&&r(e,this.update,n,"expr")},update:function(e,t,n){if(3!==e.nodeType){var r=document.createTextNode(t.nodeValue);n.replaceChild(r,e)}else e.nodeValue=t.nodeValue}})},function(e,t,n){function r(e,t){var n=[];e.children.forEach(function(e){"option"===e.type?n.push(e):"optgroup"===e.type&&e.children.forEach(function(e){"option"===e.type&&n.push(e)})});var r=e.props.multiple,o={},a=null===r||void 0===r||r===!1;Array.isArray(t)?t.forEach(function(e){o[e]=1}):o[t]=1;for(var i,s=0;i=n[s++];){var l="value"in i.props?i.props.value:(i.children[0]||{nodeValue:""}).nodeValue.trim();if(i.props.selected=!!o[l],o[l]&&a)break}}var o=n(57),a=n(58),i=n(100),s=n(101),l=n(62),c=n(44),u=n(39);avalon.directive("duplex",{priority:2e3,parse:function(e,t,n){var r=n.expr;a(n,t),avalon.caches[r]=t.field,e.vmodel="__vmodel__";var o=t.props.type;o&&(e.props.type=avalon.quote(o)),e.props["ms-duplex"]=avalon.quote(r),e.props["data-duplex-get"]=u.get("duplex:"+r),e.props["data-duplex-set"]=u.get("duplex:set:"+r);var i=u.get("duplex:format:"+r);i&&(e.props["data-duplex-format"]=i)},diff:function(e,t,n){var o=e.props["ms-duplex"];e.field=t.field||avalon.mix({},avalon.caches[o]);var a=e.field;a.set||i(e);var s=a.get(a.vmodel);if("select"!==e.type&&"checkbox"!==e.props.type&&(e.props.value=s),"select"!==e.type||e.children.length||(avalon.Array.merge(e.children,avalon.lexer(e.template,0,2)),r(e,s)),a.element){var l=t.props.value;u=Array.isArray(s)?s+""==l+"":s===l}else var u=!1;u||(a.modelValue=s,c(e,this.update,n,"duplex","afterChange"))},update:function(e,t){var n=e._ms_field_=t.field;if(!n.element){n.element=e;var r=n.events;for(var a in r)avalon.bind(e,a,r[a]),delete r[a]}if(l(e,t),!avalon.msie&&o===!1&&!e.valueHijack){e.valueHijack=n.update;var i=setInterval(function(){avalon.contains(avalon.root,e)?e.valueHijack():clearInterval(i)},30)}var c=n.format(n.modelValue);if(n.viewValue!==c&&(n.viewValue=c,s[n.type].call(n),e.caret)){var u=n.caretPos;u&&n.updateCaret(e,u.start,u.end),n.caretPos=null}}})},function(e,t,n){function r(e){var t=e.field;t.update=o,t.updateCaret=u,t.get=e.props["data-duplex-get"],t.set=e.props["data-duplex-set"];var n=e.props["data-duplex-format"];n&&t.formatters.push(function(e){return n(t.vmodel,e)}),t.vmodel=e.vmodel;var r=t.events={};switch(t.type){case"radio":"radio"===e.props.type?r.click=o:r.change=o;break;case"checkbox":case"select":r.change=o;break;case"contenteditable":t.isChanged?r.blur=o:(p.webkitURL?r.webkitEditableContentChanged=o:p.MutationEvent&&(r.DOMCharacterDataModified=o),r.input=o);break;case"input":t.isChanged?r.change=o:(r.input=o,avalon.msie||(r.compositionstart=s,r.compositionend=l))}/password|text/.test(e.props.type)&&(r.focus=a,r.blur=i)}function o(){var e=this,t=this._ms_field_;if(!e.composing&&e.value!==t.lastViewValue){if(e.caret)try{var n=c(e);n.start!==n.end&&n.start+1!==n.end||(t.caretPos=n)}catch(r){avalon.warn("fixCaret error",r)}if(t.debounceTime>4){var o=new Date,a=o-t.time||0;t.time=o,a>=t.debounceTime?f[t.type].call(t):(clearTimeout(t.debounceID),t.debounceID=setTimeout(function(){f[t.type].call(t)},a))}else f[t.type].call(t)}}function a(){this.caret=!0}function i(){this.caret=!1}function s(){this.composing=!0}function l(e){this.composing=!1,o.call(this,e)}function c(e){var t=NaN,n=NaN;return e.setSelectionRange&&(t=e.selectionStart,n=e.selectionEnd),{start:t,end:n}}function u(e,t,n){e.value&&!e.readOnly&&(e.selectionStart=t,e.selectionEnd=n)}var p=avalon.window,f=n(60),d=n(6).getShortID;d(a),d(i),d(s),d(l),d(o),e.exports=r},function(e,t){var n={input:function(){this.element.value=this.viewValue},radio:function(){var e;e=this.isChecked?!!this.viewValue:this.viewValue+""===this.element.value,this.element.checked=e},checkbox:function(){for(var e=!1,t=this.element,n=t.value,r=0;r<this.modelValue.length;r++){var o=this.modelValue[r];o+""===n&&(e=!0)}t.checked=e},select:function(){var e=Array.isArray(this.viewValue)?this.viewValue.map(String):this.viewValue+"";avalon(this.element).val(e)},contenteditable:function(){this.element.innerHTML=this.viewValue,this.update.call(this.element)}};e.exports=n},function(e,t,n){function r(e){for(var t,n=0;t=e[n++];)"for"===t.directive&&(t.fixAction=!0),t.children&&r(t.children)}var o=n(103),a=n(66),i=n(44),s=avalon.directive("widget",{priority:4,parse:function(e,t,n){var r=avalon.makeHashCode("w");avalon.resolvedComponents[r]={props:avalon.shadowCopy({},t.props),template:t.template},e.props.wid=r,e.template=t.template,e.children="[]",e.props[n.name]=avalon.parseExpr(n);var o=t.$append||"";t.$append=["var curIndex = vnodes.length - 1","var el = vnodes[curIndex]","if(el.nodeType === 1){","var docker =  avalon.component(el, __vmodel__)","if(docker && docker.render){",'try{eval("avalon.renderComponent( " + docker.render +",vnodes, curIndex)")',"}catch(e){avalon.log(e)}","}","}"].join("\n ")+o},define:function(){return avalon.mediatorFactory.apply(this,arguments)},diff:function(e,t,n){function o(t,n){e.vmodel.$fire("onReady",{type:"ready",target:t,wid:s,vmodel:n.vmodel}),l.renderCount=2}var a=avalon.resolvedComponents,s=e.props.wid,l=a[s];if(l&&l.renderCount)if(l.renderCount&&l.renderCount<2)e.steps=n,t.children=[],r(e.children),i(e,this.replaceByComponent,n,"widget"),i(e,o,n,"widget","afterChange");else{var c=!e.diff||e.diff(e,t,n);e.skipContent=!c;var u=e.vmodel.$events.onViewChange;u&&u.length&&(n.count+=1,e.afterChange=[function(n,r){var o=t.outerHTML,a=e.outerHTML||(e.outerHTML=avalon.vdomAdaptor(e,"toHTML"));o!==a&&e.vmodel.$fire("onViewChange",{type:"viewchange",target:n,wid:s,vmodel:r.vmodel}),l.renderCount++}])}else n.count+=1,e.change=[this.replaceByComment]},addDisposeMonitor:function(e){o.byRewritePrototype(e)},replaceByComment:function(e,t,n){var r=document.createComment(t.nodeValue);e?n.replaceChild(r,e):n.appendChild(r)},replaceByComponent:function(e,t,n){var r=avalon.vdomAdaptor(t,"toDOM");return t.ouerHTML=avalon.vdomAdaptor(t,"toHTML"),e?n.replaceChild(r,e):n.appendChild(r),a([r],[t],n,t.steps),s.addDisposeMonitor(r),!1}})},function(e,t){function n(){function e(e,n){var r=t[e];t[e]=function(e,t){return n.call(this,r,e,t)}}if(!n.execute){n.execute=!0;var t=Node.prototype;e("removeChild",function(e,t,n){return e.call(this,t,n),1===t.nodeType&&o(t),t}),e("replaceChild",function(e,t,n){return e.call(this,t,n),1===t.nodeType&&o(t),t}),e("innerHTML",function(e,t){var n=this.getElementsByTagName("*");e.call(this,t),a(n)}),e("appendChild",function(e,t){return e.call(this,t),1===t.nodeType&&11===this.nodeType&&o(t),t}),e("insertBefore",function(e,t){return e.call(this,t),1===t.nodeType&&11===this.nodeType&&o(t),t})}}function r(e){if(1===e.nodeType&&e.getAttribute("wid")&&!avalon.contains(avalon.root,e)){var t=e.getAttribute("wid"),n=avalon.resolvedComponents[t];if(!n)return;var r=n.vmodel,o=!!n.cached;return n.vmodel.$fire("onDispose",{type:"dispose",target:e,vmodel:r,cached:o}),n&&n.vmodel&&!o&&(r.$element=null,r.$hashcode=!1,delete n.vmodel,delete avalon.resolvedComponents[t]),!1}}function o(e){setTimeout(function(){r(e)},4)}function a(e){for(var t,n=0;t=e[n++];)r(t)}e.exports={byRewritePrototype:n}},function(e,t,n){function r(e){return e.length>3&&e.indexOf("-")>0&&g.test(e.charAt(0)+e.slice(-1))}function o(e,t,n){for(var r in t)if(t.hasOwnProperty(r)){var o=t[r];h[r]?r in e?e[r].push(o):e[r]=[t[r]]:isFinite(n)&&(e[r]=o)}}function a(e){var t=!0;try{i(e)}catch(n){t=!1}return t}function i(e){e.children.forEach(function(e){if(8===e.nodeType&&e.props){if("ms-widget"in e.props)throw"unresolved"}else e.children&&i(e)})}function s(e,t,n){var r={};n?r[n]=t.children:t.children.forEach(function(e){if(1===e.nodeType){var t=e.props.slot||"default";r[t]?r[t].push(e):r[t]=[e]}}),l(e,r)}function l(e,t){for(var n,r=0;n=e[r++];)if(1===n.nodeType)if("slot"===n.type){var o=n.props.name||"default";if(t[o]){var a=t[o];e.splice.apply(e,[r-1,1].concat(a)),1===a.length&&3===a[0].nodeType&&c(e)}}else l(n.children,t);return e}function c(e){for(var t,n=0;t=e[n];n++)if(t.skipContent===!1&&3===t.nodeType){var r=e[n-1],o=e[n+1];r&&3===r.nodeType&&!/\S/.test(r.nodeValue)&&(avalon.Array.remove(e,r),--n),o&&3===o.nodeType&&!/\S/.test(o.nodeValue)&&avalon.Array.remove(e,o)}}var u=n(16),p=n(37),f=avalon.resolvedComponents,d=(n(77),{wbr:1,xmp:1,template:1}),v="onInit,onReady,onViewChange,onDispose",h=avalon.oneObject(v),m=v.split(",").concat("is","diff","define","cached");avalon.component=function(e,t){if("string"!=typeof e){var n=e,a=n.props.wid,i=f[a];if(i&&i.render)return avalon.log("立即返回"),i;var c=t,v={},g=[].concat(n.props["ms-widget"]||[]);g.forEach(function(e,t){o(v,e,t)});var y=n.type.indexOf("-")>0?n.type:v.is,b=y.replace(/-/g,"_");if(avalon.isObject(c[b])&&(v={},g=[c[b]],o(v,c[b],0),m=[b].concat(m)),v.cached){var w=avalon.vmodels[v.$id];if(w){var x=w.$events.__wid__;a!==x&&(delete f[a],a=x)}}if(i=f[a],i||(f[a]=n,i=n),i.render)return i;var T={nodeType:8,type:"#comment",directive:"widget",props:{"ms-widget":a},nodeValue:"ms-widget placeholder"};if(avalon.components[y]){var _=n.type;d[_]||r(_)||avalon.warn(_+"不合适做组件的标签"),"xmp"!==_&&"template"!==_&&0!==n.children.length||(n.children=avalon.lexer(i.template)),t=avalon.components[y];var E=v.diff,C=v.define;C=C||avalon.directives.widget.define;var A=v.$id||avalon.makeHashCode(b),$=avalon.mix(!0,{},t.defaults);o(v,$,!1),defineArgs=[c,$].concat(g);var k=C.apply(function(e,t){m.forEach(function(n){delete e[n],delete t[n]})},defineArgs);k.$id=A,k.$element=c.$element,avalon.vmodels[A]=k;var O=t.template.trim();"function"==typeof t.getTemplate&&(O=t.getTemplate(k,O));var M=avalon.lexer(O);M.length>1&&avalon.error("组件必须用一个元素包起来");var S=M[0];S.props.wid=a;for(var D in i.props)"ms-widget"!==D&&(S.props[D]=i.props[D]);if(t.soleSlot){var j={},N=t.soleSlot;j[N]=/\S/.test(i.template)?n.children:new u("{{@"+N+"}}"),l(M,j)}else n.isVoidTag||s(M,n,t.soleSlot);for(D in h)v[D]&&v[D].forEach(function(e){k.$watch(D,e)});var L="(function(__vmodel__){"+p(M)+"})(docker.vmodel)";return k.$render=c.$render,k.$events.__wid__=a,k.$fire("onInit",{type:"init",vmodel:k,wid:a,target:null}),avalon.shadowCopy(i,{diff:E,render:L,vmodel:k,cached:!!v.cached,placeholder:T}),i}return T}avalon.components[e]||(avalon.components[e]=t)};var g=/^[a-z]+$/,y={props:{}};avalon.renderComponent=function(e,t,n){e&&(e=e[0]||y);var r=avalon.resolvedComponents[e.props.wid];if(!a(e))return void(t[n]=r.placeholder);var o=e.order;e.order=o?"ms-widget;;"+o:"ms-widget",r.renderCount||(r.renderCount=1),e.props["ms-widget"]=r.props["ms-widget"],e.vmodel=r.vmodel,e.diff=r.diff,delete e.skipAttrs,t[n]=e}},function(e,t,n){function r(){}function o(e,t,n){var o={};e.$skipArray&&(o=avalon.oneObject(e.$skipArray),delete e.$skipArray);var a={};n=n||{},t=t||{};var i={},s=m("$"),l=n.pathname||"";n.id=n.id||s,n.hashcode=s;var u,h,g;for(u in e)if(!p[u]){var y=a[u]=e[u];c(u,y,o)||(h=n.id+"."+u,g=l?l+"."+u:u,i[u]=f(h,g,t))}i.$model=v;var b=new r;Object.defineProperties(b,i);for(u in a)b[u]=a[u],u in o?delete a[u]:a[u]=!0;return d(b,t,a,i,n),b}function a(e,t,n,r){var o={},a={},i=r.pathname;n=n||{};var s,l,u;for(s in t)if(!p[s]&&(o[s]=t[s],!c(s,t[s],g))){var h=Object.getOwnPropertyDescriptor(e,s);h&&h.get?a[s]=h:(l=r.id+"."+s,u=i?i+"."+s:s,a[s]=f(l,u,n))}for(s in e)delete e[s];r.hashcode=e.$hashcode||m("$"),a.$model=v;var y=e;Object.defineProperties(y,a);for(s in o)a[s]||(y[s]=o[s]),o[s]=!0;return d(y,n,o,a,r),y}function i(e,t){for(var n,o,a={},i={},s={},l={},u={},v=avalon.slice(arguments),h=0;h<v.length;h++){var g=v[h];for(var y in g){a[y]=g[y],"$skipArray"===y&&Array.isArray(g.$skipArray)&&g.$skipArray.forEach(function(e){u[e]=1});var b=Object.getOwnPropertyDescriptor(g,y);b.set?-1===v.indexOf(g[y])?i[y]=b:(n=a[y],o=y,delete a[y]):"function"!=typeof a[y]&&(s[y]=1)}}"function"==typeof this&&this(a,s);for(y in s)p[y]||i[y]||c(y,a[y],u)||(i[y]=f(e.$id+"."+y,y,l),i[y].set(a[y]));var w=new r;Object.defineProperties(w,i);for(y in a){if(i[y]||(w[y]=a[y]),o&&i[y]&&n.hasOwnProperty(y)){var x=i[y];x.get.$decompose||(x.get.$decompose={}),x.get.$decompose[o+"."+y]=w}a[y]=!0}return d(w,l,a,i,{id:e.$id,hashcode:m("$"),master:!0}),w}function s(e,t){e.length!==t&&e.notify("length",e.length,t,!0)}var l=n(106),c=l.isSkip,u=l.$$midway,p=l.$$skipArray;delete p.$accessors,delete p.__data__,delete p.__proxy__,delete p.__const__;var f=l.makeAccessor,d=l.makeObserver,v=l.modelAccessor,h=l.modelAdaptor,m=avalon.makeHashCode;u.masterFactory=o;var g={};u.slaveFactory=a,u.mediatorFactory=avalon.mediatorFactory=i;var y=l.__array__,b=Array.prototype,w=b.splice;y.removeAll=function(e){var t=this.length;if(Array.isArray(e))for(var n=this.length-1;n>=0;n--)-1!==e.indexOf(this[n])&&w.call(this,n,1);else if("function"==typeof e)for(n=this.length-1;n>=0;n--){var r=this[n];e(r,n)&&w.call(this,n,1)}else w.call(this,0,this.length);s(this,t),this.notify()};var x=["push","pop","shift","unshift","splice"];x.forEach(function(e){var t=b[e];y[e]=function(n,r){var o=[],a=this.length;if("splice"===e&&Object(this[0])===this[0])for(var i=this.slice(n,r),l=b.slice.call(arguments,2),o=[n,r],c=0,u=l.length;u>c;c++){var p=i[c];o[c+2]=h(l[c],p,p&&p.$events,{id:this.$id+".*",master:!0})}else for(var f=0,d=arguments.length;d>f;f++)o[f]=h(arguments[f],0,{},{id:this.$id+".*",master:!0});var v=t.apply(this,o);return s(this,a),this.notify(),v}}),"sort,reverse".replace(avalon.rword,function(e){y[e]=function(){return b[e].apply(this,arguments),this.notify(),this}}),e.exports=avalon},function(e,t,n){function r(e){var t=avalon.type(e);if("array"===t){for(var n=[],o=0;o<e.length;o++)n[o]=r(e[o]);return n}if("object"===t){var a={};for(o in e)if(e.hasOwnProperty(o)){var i=e[o];a[o]=i&&i.nodeType?i:r(i)}return a}return e}function o(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!1,configurable:!0})}function a(e,t,n,r,a){function i(e){return n[e]===!0}a.array?Object.defineProperty(e,"$model",l):o(e,"hasOwnProperty",i),o(e,"$id",a.id),o(e,"$hashcode",a.hashcode),o(e,"$track",Object.keys(n).sort().join(";;")),a.master===!0&&(o(e,"$element",null),o(e,"$render",0),s(e,t))}var i=n(80),s=i.makeFire,l={get:function(){return r(this)},set:avalon.noop,enumerable:!1,configurable:!0};i.$$midway.hideProperty=o,i.$$midway.makeObserver=a;var c={toJson:r,makeObserver:a,modelAccessor:l};for(var u in i)c[u]=i[u];e.exports=c}])}),function(e,t,n,r){"use strict";function o(e,t,n){return setTimeout(c(e,n),t)}function a(e,t,n){return Array.isArray(e)?(i(e,n[t],n),!0):!1}function i(e,t,n){var o;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==r)for(o=0;o<e.length;)t.call(n,e[o],o,e),o++;else for(o in e)e.hasOwnProperty(o)&&t.call(n,e[o],o,e)}function s(t,n,r){var o="DEPRECATED METHOD: "+n+"\n"+r+" AT \n";return function(){var n=new Error("get-stack-trace"),r=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",a=e.console&&(e.console.warn||e.console.log);return a&&a.call(e.console,o,r),t.apply(this,arguments)}}function l(e,t,n){var r,o=t.prototype;r=e.prototype=Object.create(o),r.constructor=e,r._super=o,n&&pe(r,n)}function c(e,t){return function(){return e.apply(t,arguments)}}function u(e,t){return typeof e==ve?e.apply(t?t[0]||r:r,t):e}function p(e,t){return e===r?t:e}function f(e,t,n){i(m(t),function(t){e.addEventListener(t,n,!1)})}function d(e,t,n){i(m(t),function(t){e.removeEventListener(t,n,!1)})}function v(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function h(e,t){return e.indexOf(t)>-1}function m(e){return e.trim().split(/\s+/g)}function g(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function y(e){return Array.prototype.slice.call(e,0)}function b(e,t,n){for(var r=[],o=[],a=0;a<e.length;){var i=t?e[a][t]:e[a];g(o,i)<0&&r.push(e[a]),o[a]=i,a++}return n&&(r=t?r.sort(function(e,n){return e[t]>n[t]}):r.sort()),r}function w(e,t){for(var n,o,a=t[0].toUpperCase()+t.slice(1),i=0;i<fe.length;){if(n=fe[i],o=n?n+a:t,o in e)return o;i++}return r}function x(){return we++}function T(t){var n=t.ownerDocument||t;return n.defaultView||n.parentWindow||e}function _(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){u(e.options.enable,[e])&&n.handler(t)},this.init()}function E(e){var t,n=e.options.inputClass;return new(t=n?n:_e?P:Ee?R:Te?q:I)(e,C)}function C(e,t,n){var r=n.pointers.length,o=n.changedPointers.length,a=t&Me&&r-o===0,i=t&(De|je)&&r-o===0;n.isFirst=!!a,n.isFinal=!!i,a&&(e.session={}),n.eventType=t,A(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function A(e,t){var n=e.session,r=t.pointers,o=r.length;n.firstInput||(n.firstInput=O(t)),o>1&&!n.firstMultiple?n.firstMultiple=O(t):1===o&&(n.firstMultiple=!1);var a=n.firstInput,i=n.firstMultiple,s=i?i.center:a.center,l=t.center=M(r);t.timeStamp=ge(),t.deltaTime=t.timeStamp-a.timeStamp,t.angle=N(s,l),t.distance=j(s,l),$(n,t),t.offsetDirection=D(t.deltaX,t.deltaY);var c=S(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=c.x,t.overallVelocityY=c.y,t.overallVelocity=me(c.x)>me(c.y)?c.x:c.y,t.scale=i?V(i.pointers,r):1,t.rotation=i?L(i.pointers,r):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,k(n,t);var u=e.element;v(t.srcEvent.target,u)&&(u=t.srcEvent.target),t.target=u}function $(e,t){var n=t.center,r=e.offsetDelta||{},o=e.prevDelta||{},a=e.prevInput||{};t.eventType!==Me&&a.eventType!==De||(o=e.prevDelta={x:a.deltaX||0,y:a.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=o.x+(n.x-r.x),t.deltaY=o.y+(n.y-r.y)}function k(e,t){var n,o,a,i,s=e.lastInterval||t,l=t.timeStamp-s.timeStamp;if(t.eventType!=je&&(l>Oe||s.velocity===r)){var c=t.deltaX-s.deltaX,u=t.deltaY-s.deltaY,p=S(l,c,u);o=p.x,a=p.y,n=me(p.x)>me(p.y)?p.x:p.y,i=D(c,u),e.lastInterval=t}else n=s.velocity,o=s.velocityX,a=s.velocityY,i=s.direction;t.velocity=n,t.velocityX=o,t.velocityY=a,t.direction=i}function O(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:he(e.pointers[n].clientX),clientY:he(e.pointers[n].clientY)},n++;return{timeStamp:ge(),pointers:t,center:M(t),deltaX:e.deltaX,deltaY:e.deltaY}}function M(e){var t=e.length;if(1===t)return{x:he(e[0].clientX),y:he(e[0].clientY)};for(var n=0,r=0,o=0;t>o;)n+=e[o].clientX,r+=e[o].clientY,o++;return{x:he(n/t),y:he(r/t)}}function S(e,t,n){return{x:t/e||0,y:n/e||0}}function D(e,t){return e===t?Ne:me(e)>=me(t)?0>e?Le:Ve:0>t?Ie:Pe}function j(e,t,n){n||(n=ze);var r=t[n[0]]-e[n[0]],o=t[n[1]]-e[n[1]];return Math.sqrt(r*r+o*o)}function N(e,t,n){n||(n=ze);var r=t[n[0]]-e[n[0]],o=t[n[1]]-e[n[1]];return 180*Math.atan2(o,r)/Math.PI}function L(e,t){return N(t[1],t[0],qe)+N(e[1],e[0],qe)}function V(e,t){return j(t[0],t[1],qe)/j(e[0],e[1],qe)}function I(){this.evEl=Ye,this.evWin=We,this.pressed=!1,_.apply(this,arguments)}function P(){this.evEl=Ke,this.evWin=Ze,_.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function H(){this.evTarget=Je,this.evWin=Qe,this.started=!1,_.apply(this,arguments)}function F(e,t){var n=y(e.touches),r=y(e.changedTouches);return t&(De|je)&&(n=b(n.concat(r),"identifier",!0)),[n,r]}function R(){this.evTarget=tt,this.targetIds={},_.apply(this,arguments)}function z(e,t){var n=y(e.touches),r=this.targetIds;if(t&(Me|Se)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var o,a,i=y(e.changedTouches),s=[],l=this.target;if(a=n.filter(function(e){return v(e.target,l)}),t===Me)for(o=0;o<a.length;)r[a[o].identifier]=!0,o++;for(o=0;o<i.length;)r[i[o].identifier]&&s.push(i[o]),t&(De|je)&&delete r[i[o].identifier],o++;return s.length?[b(a.concat(s),"identifier",!0),s]:void 0}function q(){_.apply(this,arguments);var e=c(this.handler,this);this.touch=new R(this.manager,e),this.mouse=new I(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function B(e,t){e&Me?(this.primaryTouch=t.changedPointers[0].identifier,Y.call(this,t)):e&(De|je)&&Y.call(this,t)}function Y(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var r=this.lastTouches,o=function(){var e=r.indexOf(n);e>-1&&r.splice(e,1)};setTimeout(o,nt)}}function W(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var o=this.lastTouches[r],a=Math.abs(t-o.x),i=Math.abs(n-o.y);if(rt>=a&&rt>=i)return!0}return!1}function U(e,t){this.manager=e,this.set(t)}function X(e){if(h(e,ct))return ct;var t=h(e,ut),n=h(e,pt);return t&&n?ct:t||n?t?ut:pt:h(e,lt)?lt:st}function K(){if(!at)return!1;var t={},n=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){t[r]=n?e.CSS.supports("touch-action",r):!0}),t}function Z(e){this.options=pe({},this.defaults,e||{}),this.id=x(),this.manager=null,this.options.enable=p(this.options.enable,!0),this.state=dt,this.simultaneous={},this.requireFail=[]}function G(e){return e&yt?"cancel":e&mt?"end":e&ht?"move":e&vt?"start":""}function J(e){return e==Pe?"down":e==Ie?"up":e==Le?"left":e==Ve?"right":""}function Q(e,t){var n=t.manager;return n?n.get(e):e}function ee(){Z.apply(this,arguments)}function te(){ee.apply(this,arguments),this.pX=null,this.pY=null}function ne(){ee.apply(this,arguments)}function re(){Z.apply(this,arguments),this._timer=null,this._input=null}function oe(){ee.apply(this,arguments)}function ae(){ee.apply(this,arguments)}function ie(){Z.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function se(e,t){return t=t||{},t.recognizers=p(t.recognizers,se.defaults.preset),new le(e,t)}function le(e,t){this.options=pe({},se.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=E(this),this.touchAction=new U(this,this.options.touchAction),ce(this,!0),i(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function ce(e,t){var n=e.element;if(n.style){var r;i(e.options.cssProps,function(o,a){r=w(n.style,a),t?(e.oldCssProps[r]=n.style[r],n.style[r]=o):n.style[r]=e.oldCssProps[r]||""}),t||(e.oldCssProps={})}}function ue(e,n){var r=t.createEvent("Event");r.initEvent(e,!0,!0),r.gesture=n,n.target.dispatchEvent(r)}var pe,fe=["","webkit","Moz","MS","ms","o"],de=t.createElement("div"),ve="function",he=Math.round,me=Math.abs,ge=Date.now;pe="function"!=typeof Object.assign?function(e){if(e===r||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var o=arguments[n];if(o!==r&&null!==o)for(var a in o)o.hasOwnProperty(a)&&(t[a]=o[a])}return t}:Object.assign;var ye=s(function(e,t,n){for(var o=Object.keys(t),a=0;a<o.length;)(!n||n&&e[o[a]]===r)&&(e[o[a]]=t[o[a]]),a++;return e},"extend","Use `assign`."),be=s(function(e,t){return ye(e,t,!0)},"merge","Use `assign`."),we=1,xe=/mobile|tablet|ip(ad|hone|od)|android/i,Te="ontouchstart"in e,_e=w(e,"PointerEvent")!==r,Ee=Te&&xe.test(navigator.userAgent),Ce="touch",Ae="pen",$e="mouse",ke="kinect",Oe=25,Me=1,Se=2,De=4,je=8,Ne=1,Le=2,Ve=4,Ie=8,Pe=16,He=Le|Ve,Fe=Ie|Pe,Re=He|Fe,ze=["x","y"],qe=["clientX","clientY"];_.prototype={handler:function(){},init:function(){this.evEl&&f(this.element,this.evEl,this.domHandler),this.evTarget&&f(this.target,this.evTarget,this.domHandler),this.evWin&&f(T(this.element),this.evWin,this.domHandler);
},destroy:function(){this.evEl&&d(this.element,this.evEl,this.domHandler),this.evTarget&&d(this.target,this.evTarget,this.domHandler),this.evWin&&d(T(this.element),this.evWin,this.domHandler)}};var Be={mousedown:Me,mousemove:Se,mouseup:De},Ye="mousedown",We="mousemove mouseup";l(I,_,{handler:function(e){var t=Be[e.type];t&Me&&0===e.button&&(this.pressed=!0),t&Se&&1!==e.which&&(t=De),this.pressed&&(t&De&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:$e,srcEvent:e}))}});var Ue={pointerdown:Me,pointermove:Se,pointerup:De,pointercancel:je,pointerout:je},Xe={2:Ce,3:Ae,4:$e,5:ke},Ke="pointerdown",Ze="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Ke="MSPointerDown",Ze="MSPointerMove MSPointerUp MSPointerCancel"),l(P,_,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),o=Ue[r],a=Xe[e.pointerType]||e.pointerType,i=a==Ce,s=g(t,e.pointerId,"pointerId");o&Me&&(0===e.button||i)?0>s&&(t.push(e),s=t.length-1):o&(De|je)&&(n=!0),0>s||(t[s]=e,this.callback(this.manager,o,{pointers:t,changedPointers:[e],pointerType:a,srcEvent:e}),n&&t.splice(s,1))}});var Ge={touchstart:Me,touchmove:Se,touchend:De,touchcancel:je},Je="touchstart",Qe="touchstart touchmove touchend touchcancel";l(H,_,{handler:function(e){var t=Ge[e.type];if(t===Me&&(this.started=!0),this.started){var n=F.call(this,e,t);t&(De|je)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:Ce,srcEvent:e})}}});var et={touchstart:Me,touchmove:Se,touchend:De,touchcancel:je},tt="touchstart touchmove touchend touchcancel";l(R,_,{handler:function(e){var t=et[e.type],n=z.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:Ce,srcEvent:e})}});var nt=2500,rt=25;l(q,_,{handler:function(e,t,n){var r=n.pointerType==Ce,o=n.pointerType==$e;if(!(o&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)B.call(this,t,n);else if(o&&W.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ot=w(de.style,"touchAction"),at=ot!==r,it="compute",st="auto",lt="manipulation",ct="none",ut="pan-x",pt="pan-y",ft=K();U.prototype={set:function(e){e==it&&(e=this.compute()),at&&this.manager.element.style&&ft[e]&&(this.manager.element.style[ot]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return i(this.manager.recognizers,function(t){u(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),X(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)return void t.preventDefault();var r=this.actions,o=h(r,ct)&&!ft[ct],a=h(r,pt)&&!ft[pt],i=h(r,ut)&&!ft[ut];if(o){var s=1===e.pointers.length,l=e.distance<2,c=e.deltaTime<250;if(s&&l&&c)return}return i&&a?void 0:o||a&&n&He||i&&n&Fe?this.preventSrc(t):void 0},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var dt=1,vt=2,ht=4,mt=8,gt=mt,yt=16,bt=32;Z.prototype={defaults:{},set:function(e){return pe(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(a(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=Q(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return a(e,"dropRecognizeWith",this)?this:(e=Q(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(a(e,"requireFailure",this))return this;var t=this.requireFail;return e=Q(e,this),-1===g(t,e)&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(a(e,"dropRequireFailure",this))return this;e=Q(e,this);var t=g(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function t(t){n.manager.emit(t,e)}var n=this,r=this.state;mt>r&&t(n.options.event+G(r)),t(n.options.event),e.additionalEvent&&t(e.additionalEvent),r>=mt&&t(n.options.event+G(r))},tryEmit:function(e){return this.canEmit()?this.emit(e):void(this.state=bt)},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(bt|dt)))return!1;e++}return!0},recognize:function(e){var t=pe({},e);return u(this.options.enable,[this,t])?(this.state&(gt|yt|bt)&&(this.state=dt),this.state=this.process(t),void(this.state&(vt|ht|mt|yt)&&this.tryEmit(t))):(this.reset(),void(this.state=bt))},process:function(e){},getTouchAction:function(){},reset:function(){}},l(ee,Z,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=t&(vt|ht),o=this.attrTest(e);return r&&(n&je||!o)?t|yt:r||o?n&De?t|mt:t&vt?t|ht:vt:bt}}),l(te,ee,{defaults:{event:"pan",threshold:10,pointers:1,direction:Re},getTouchAction:function(){var e=this.options.direction,t=[];return e&He&&t.push(pt),e&Fe&&t.push(ut),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,o=e.direction,a=e.deltaX,i=e.deltaY;return o&t.direction||(t.direction&He?(o=0===a?Ne:0>a?Le:Ve,n=a!=this.pX,r=Math.abs(e.deltaX)):(o=0===i?Ne:0>i?Ie:Pe,n=i!=this.pY,r=Math.abs(e.deltaY))),e.direction=o,n&&r>t.threshold&&o&t.direction},attrTest:function(e){return ee.prototype.attrTest.call(this,e)&&(this.state&vt||!(this.state&vt)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=J(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),l(ne,ee,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ct]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&vt)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),l(re,Z,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[st]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,a=e.deltaTime>t.time;if(this._input=e,!r||!n||e.eventType&(De|je)&&!a)this.reset();else if(e.eventType&Me)this.reset(),this._timer=o(function(){this.state=gt,this.tryEmit()},t.time,this);else if(e.eventType&De)return gt;return bt},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===gt&&(e&&e.eventType&De?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=ge(),this.manager.emit(this.options.event,this._input)))}}),l(oe,ee,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ct]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&vt)}}),l(ae,ee,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:He|Fe,pointers:1},getTouchAction:function(){return te.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(He|Fe)?t=e.overallVelocity:n&He?t=e.overallVelocityX:n&Fe&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&me(t)>this.options.velocity&&e.eventType&De},emit:function(e){var t=J(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),l(ie,Z,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[lt]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,a=e.deltaTime<t.time;if(this.reset(),e.eventType&Me&&0===this.count)return this.failTimeout();if(r&&a&&n){if(e.eventType!=De)return this.failTimeout();var i=this.pTime?e.timeStamp-this.pTime<t.interval:!0,s=!this.pCenter||j(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,s&&i?this.count+=1:this.count=1,this._input=e;var l=this.count%t.taps;if(0===l)return this.hasRequireFailures()?(this._timer=o(function(){this.state=gt,this.tryEmit()},t.interval,this),vt):gt}return bt},failTimeout:function(){return this._timer=o(function(){this.state=bt},this.options.interval,this),bt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==gt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),se.VERSION="2.0.7",se.defaults={domEvents:!1,touchAction:it,enable:!0,inputTarget:null,inputClass:null,preset:[[oe,{enable:!1}],[ne,{enable:!1},["rotate"]],[ae,{direction:He}],[te,{direction:He},["swipe"]],[ie],[ie,{event:"doubletap",taps:2},["tap"]],[re]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var wt=1,xt=2;le.prototype={set:function(e){return pe(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?xt:wt},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var n,r=this.recognizers,o=t.curRecognizer;(!o||o&&o.state&gt)&&(o=t.curRecognizer=null);for(var a=0;a<r.length;)n=r[a],t.stopped===xt||o&&n!=o&&!n.canRecognizeWith(o)?n.reset():n.recognize(e),!o&&n.state&(vt|ht|mt)&&(o=t.curRecognizer=n),a++}},get:function(e){if(e instanceof Z)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(a(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(a(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=g(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==r&&t!==r){var n=this.handlers;return i(m(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==r){var n=this.handlers;return i(m(e),function(e){t?n[e]&&n[e].splice(g(n[e],t),1):delete n[e]}),this}},emit:function(e,t){this.options.domEvents&&ue(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](t),r++}},destroy:function(){this.element&&ce(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},pe(se,{INPUT_START:Me,INPUT_MOVE:Se,INPUT_END:De,INPUT_CANCEL:je,STATE_POSSIBLE:dt,STATE_BEGAN:vt,STATE_CHANGED:ht,STATE_ENDED:mt,STATE_RECOGNIZED:gt,STATE_CANCELLED:yt,STATE_FAILED:bt,DIRECTION_NONE:Ne,DIRECTION_LEFT:Le,DIRECTION_RIGHT:Ve,DIRECTION_UP:Ie,DIRECTION_DOWN:Pe,DIRECTION_HORIZONTAL:He,DIRECTION_VERTICAL:Fe,DIRECTION_ALL:Re,Manager:le,Input:_,TouchAction:U,TouchInput:R,MouseInput:I,PointerEventInput:P,TouchMouseInput:q,SingleTouchInput:H,Recognizer:Z,AttrRecognizer:ee,Tap:ie,Pan:te,Swipe:ae,Pinch:ne,Rotate:oe,Press:re,on:f,off:d,each:i,merge:be,extend:ye,assign:pe,inherit:l,bindFn:c,prefixed:w});var Tt="undefined"!=typeof e?e:"undefined"!=typeof self?self:{};Tt.Hammer=se,"function"==typeof define&&define.amd?define(function(){return se}):"undefined"!=typeof module&&module.exports?module.exports=se:e[n]=se}(window,document,"Hammer"),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.page=e()}}(function(){return function e(t,n,r){function o(i,s){if(!n[i]){if(!t[i]){var l="function"==typeof require&&require;if(!s&&l)return l(i,!0);if(a)return a(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[i]={exports:{}};t[i][0].call(u.exports,function(e){var n=t[i][1][e];return o(n?n:e)},u,u.exports,e,t,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){(function(n){"use strict";function r(e,t){if("function"==typeof e)return r("*",e);if("function"==typeof t)for(var n=new s(e),o=1;o<arguments.length;++o)r.callbacks.push(n.middleware(arguments[o]));else"string"==typeof e?r["string"==typeof t?"redirect":"show"](e,t):r.start(e)}function o(e){if(!e.handled){var t;t=b?y+h.hash.replace("#!",""):h.pathname+h.search,t!==e.canonicalPath&&(r.stop(),e.handled=!1,h.href=e.canonicalPath)}}function a(e){return"string"!=typeof e?e:g?decodeURIComponent(e.replace(/\+/g," ")):e}function i(e,t){"/"===e[0]&&0!==e.indexOf(y)&&(e=y+(b?"#!":"")+e);var n=e.indexOf("?");if(this.canonicalPath=e,this.path=e.replace(y,"")||"/",b&&(this.path=this.path.replace("#!","")||"/"),this.title=document.title,this.state=t||{},this.state.path=e,this.querystring=~n?a(e.slice(n+1)):"",this.pathname=a(~n?e.slice(0,n):e),this.params={},this.hash="",!b){if(!~this.path.indexOf("#"))return;var r=this.path.split("#");this.path=r[0],this.hash=a(r[1])||"",this.querystring=this.querystring.split("#")[0]}}function s(e,t){t=t||{},this.path="*"===e?"(.*)":e,this.method="GET",this.regexp=p(this.path,this.keys=[],t)}function l(e){if(1===c(e)&&!(e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)){for(var t=e.path?e.path[0]:e.target;t&&"A"!==t.nodeName;)t=t.parentNode;if(t&&"A"===t.nodeName&&!t.hasAttribute("download")&&"external"!==t.getAttribute("rel")){var o=t.getAttribute("href");if((b||t.pathname!==h.pathname||!t.hash&&"#"!==o)&&!(o&&o.indexOf("mailto:")>-1)&&!t.target&&u(t.href)){var a=t.pathname+t.search+(t.hash||"");"undefined"!=typeof n&&a.match(/^\/[a-zA-Z]:\//)&&(a=a.replace(/^\/[a-zA-Z]:\//,"/"));var i=a;0===a.indexOf(y)&&(a=a.substr(y.length)),b&&(a=a.replace("#!","")),y&&i===a||(e.preventDefault(),r.show(i))}}}}function c(e){return e=e||window.event,null===e.which?e.button:e.which}function u(e){var t=h.protocol+"//"+h.hostname;return h.port&&(t+=":"+h.port),e&&0===e.indexOf(t)}var p=e("path-to-regexp");t.exports=r;var f,d,v="undefined"!=typeof document&&document.ontouchstart?"touchstart":"click",h="undefined"!=typeof window&&(window.history.location||window.location),m=!0,g=!0,y="",b=!1;r.callbacks=[],r.exits=[],r.current="",r.len=0,r.base=function(e){return 0===arguments.length?y:void(y=e)},r.start=function(e){if(e=e||{},!f&&(f=!0,!1===e.dispatch&&(m=!1),!1===e.decodeURLComponents&&(g=!1),!1!==e.popstate&&window.addEventListener("popstate",w,!1),!1!==e.click&&document.addEventListener(v,l,!1),!0===e.hashbang&&(b=!0),m)){var t=b&&~h.hash.indexOf("#!")?h.hash.substr(2)+h.search:h.pathname+h.search+h.hash;r.replace(t,null,!0,m)}},r.stop=function(){f&&(r.current="",r.len=0,f=!1,document.removeEventListener(v,l,!1),window.removeEventListener("popstate",w,!1))},r.show=function(e,t,n,o){var a=new i(e,t);return r.current=a.path,!1!==n&&r.dispatch(a),!1!==a.handled&&!1!==o&&a.pushState(),a},r.back=function(e,t){r.len>0?(history.back(),r.len--):e?setTimeout(function(){r.show(e,t)}):setTimeout(function(){r.show(y,t)})},r.redirect=function(e,t){"string"==typeof e&&"string"==typeof t&&r(e,function(e){setTimeout(function(){r.replace(t)},0)}),"string"==typeof e&&"undefined"==typeof t&&setTimeout(function(){r.replace(e)},0)},r.replace=function(e,t,n,o){var a=new i(e,t);return r.current=a.path,a.init=n,a.save(),!1!==o&&r.dispatch(a),a},r.dispatch=function(e){function t(){var e=r.exits[s++];return e?void e(a,t):n()}function n(){var t=r.callbacks[i++];return e.path!==r.current?void(e.handled=!1):t?void t(e,n):o(e)}var a=d,i=0,s=0;d=e,a?t():n()},r.exit=function(e,t){if("function"==typeof e)return r.exit("*",e);for(var n=new s(e),o=1;o<arguments.length;++o)r.exits.push(n.middleware(arguments[o]))},r.Context=i,i.prototype.pushState=function(){r.len++,history.pushState(this.state,this.title,b&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},i.prototype.save=function(){history.replaceState(this.state,this.title,b&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},r.Route=s,s.prototype.middleware=function(e){var t=this;return function(n,r){return t.match(n.path,n.params)?e(n,r):void r()}},s.prototype.match=function(e,t){var n=this.keys,r=e.indexOf("?"),o=~r?e.slice(0,r):e,i=this.regexp.exec(decodeURIComponent(o));if(!i)return!1;for(var s=1,l=i.length;l>s;++s){var c=n[s-1],u=a(i[s]);void 0===u&&hasOwnProperty.call(t,c.name)||(t[c.name]=u)}return!0};var w=function(){var e=!1;if("undefined"!=typeof window)return"complete"===document.readyState?e=!0:window.addEventListener("load",function(){setTimeout(function(){e=!0},0)}),function(t){if(e)if(t.state){var n=t.state.path;r.replace(n,t.state)}else r.show(h.pathname+h.hash,void 0,void 0,!1)}}();r.sameOrigin=u}).call(this,e("_process"))},{_process:2,"path-to-regexp":3}],2:[function(e,t,n){function r(){}var o=t.exports={};o.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.MutationObserver,n="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};var r=[];if(t){var o=document.createElement("div"),a=new MutationObserver(function(){var e=r.slice();r.length=0,e.forEach(function(e){e()})});return a.observe(o,{attributes:!0}),function(e){r.length||o.setAttribute("yes","no"),r.push(e)}}return n?(window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),r.length>0)){var n=r.shift();n()}},!0),function(e){r.push(e),window.postMessage("process-tick","*")}):function(e){setTimeout(e,0)}}(),o.title="browser",o.browser=!0,o.env={},o.argv=[],o.on=r,o.addListener=r,o.once=r,o.off=r,o.removeListener=r,o.removeAllListeners=r,o.emit=r,o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")}},{}],3:[function(e,t,n){function r(e){for(var t,n=[],r=0,o=0,a="";null!=(t=m.exec(e));){var i=t[0],l=t[1],c=t.index;if(a+=e.slice(o,c),o=c+i.length,l)a+=l[1];else{a&&(n.push(a),a="");var u=t[2],p=t[3],f=t[4],d=t[5],v=t[6],h=t[7],g="+"===v||"*"===v,y="?"===v||"*"===v,b=u||"/",w=f||d||(h?".*":"[^"+b+"]+?");n.push({name:p||r++,prefix:u||"",delimiter:b,optional:y,repeat:g,pattern:s(w)})}}return o<e.length&&(a+=e.substr(o)),a&&n.push(a),n}function o(e){return a(r(e))}function a(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"==typeof e[n]&&(t[n]=new RegExp("^"+e[n].pattern+"$"));return function(n){for(var r="",o=n||{},a=0;a<e.length;a++){var i=e[a];if("string"!=typeof i){var s,l=o[i.name];if(null==l){if(i.optional)continue;throw new TypeError('Expected "'+i.name+'" to be defined')}if(h(l)){if(!i.repeat)throw new TypeError('Expected "'+i.name+'" to not repeat, but received "'+l+'"');if(0===l.length){if(i.optional)continue;throw new TypeError('Expected "'+i.name+'" to not be empty')}for(var c=0;c<l.length;c++){if(s=encodeURIComponent(l[c]),!t[a].test(s))throw new TypeError('Expected all "'+i.name+'" to match "'+i.pattern+'", but received "'+s+'"');r+=(0===c?i.prefix:i.delimiter)+s}}else{if(s=encodeURIComponent(l),!t[a].test(s))throw new TypeError('Expected "'+i.name+'" to match "'+i.pattern+'", but received "'+s+'"');r+=i.prefix+s}}else r+=i}return r}}function i(e){return e.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function s(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function c(e){return e.sensitive?"":"i"}function u(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return l(e,t)}function p(e,t,n){for(var r=[],o=0;o<e.length;o++)r.push(v(e[o],t,n).source);var a=new RegExp("(?:"+r.join("|")+")",c(n));return l(a,t)}function f(e,t,n){for(var o=r(e),a=d(o,n),i=0;i<o.length;i++)"string"!=typeof o[i]&&t.push(o[i]);return l(a,t)}function d(e,t){t=t||{};for(var n=t.strict,r=t.end!==!1,o="",a=e[e.length-1],s="string"==typeof a&&/\/$/.test(a),l=0;l<e.length;l++){var u=e[l];if("string"==typeof u)o+=i(u);else{var p=i(u.prefix),f=u.pattern;u.repeat&&(f+="(?:"+p+f+")*"),f=u.optional?p?"(?:"+p+"("+f+"))?":"("+f+")?":p+"("+f+")",o+=f}}return n||(o=(s?o.slice(0,-2):o)+"(?:\\/(?=$))?"),o+=r?"$":n&&s?"":"(?=\\/|$)",new RegExp("^"+o,c(t))}function v(e,t,n){return t=t||[],h(t)?n||(n={}):(n=t,t=[]),e instanceof RegExp?u(e,t,n):h(e)?p(e,t,n):f(e,t,n)}var h=e("isarray");t.exports=v,t.exports.parse=r,t.exports.compile=o,t.exports.tokensToFunction=a,t.exports.tokensToRegExp=d;var m=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g")},{isarray:4}],4:[function(e,t,n){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}]},{},[1])(1)});